<!doctype html>
<html>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<link rel='stylesheet' href='style.css'>
</head>
<body>
<header id='header'>
<button id='toggle-sidebar' aria-label='Toggle Sidebar'>â˜°</button>
<h1>Examples</h1>
</header>
<main id='main'>
<section id='s0'>
<h2> <code>cat</code></h2>
<p>
The UNIX <code>cat</code> coreutil.
</p>
<div>
<div class='tabs'>
<button class='tab active' onclick='tabClick(this)'>BS</button>
<button class='tab' onclick='tabClick(this)'>BSX</button>
</div>
<div class='codes'>
<button class='copy' onclick='copyClickCode(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># cat.bs</span>

<span class='keyword'>var</span> code = <span class='constant'>0</span>;

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>1</span>, <span class='keyword'>len</span>(os.<span class='field'>args</span>) {
    <span class='keyword'>var</span> path = os.<span class='field'>args</span>[i];
    <span class='keyword'>var</span> f = io.<span class='field'>Reader</span>(path);
    <span class='keyword'>if</span> !f {
        io.<span class='field'>eprintln</span>(<span class='string'>"Error: could not read file '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>'"</span>);
        code = <span class='constant'>1</span>;
        <span class='keyword'>continue</span>;
    }

    io.<span class='field'>print</span>(f.<span class='field'>read</span>());
    f.<span class='field'>close</span>();
}

os.<span class='field'>exit</span>(code);
</pre>
<pre class='code'>
<span class='comment'># TODO: BSX will be removed soon</span>
</pre>
</div>
</div>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='constant'>$ </span>bs cat.bs cat.bs <span class='comment'># Poor man's quine</span>
var code = 0;

for i in 1, len(os.args) {
    var path = os.args[i];
    var f = io.Reader(path);
    if !f {
        io.eprintln("Error: could not read file '\(path)'");
        code = 1;
        continue;
    }

    io.print(f.read());

    f.close();
}

os.exit(code);
</pre>
</div>
</section>
<section id='s1'>
<h2> <code>grep</code></h2>
<p>
The UNIX <code>grep</code> coreutil.
</p>
<div>
<div class='tabs'>
<button class='tab active' onclick='tabClick(this)'>BS</button>
<button class='tab' onclick='tabClick(this)'>BSX</button>
</div>
<div class='codes'>
<button class='copy' onclick='copyClickCode(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># grep.bs</span>

<span class='keyword'>fn</span> <span class='function'>grep</span>(f, path, pattern) {
    <span class='keyword'>var</span> row = <span class='constant'>0</span>;
    <span class='keyword'>while</span> !f.<span class='field'>eof</span>() {
        <span class='keyword'>var</span> line = f.<span class='field'>readln</span>();

        <span class='keyword'>var</span> col = line.<span class='field'>find</span>(pattern);
        <span class='keyword'>if</span> col {
            io.<span class='field'>println</span>(<span class='string'>"</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>:</span><span class='escape'>\</span><span class='escape'>(</span>row + <span class='constant'>1</span><span class='escape'>)</span><span class='string'>:</span><span class='escape'>\</span><span class='escape'>(</span>col + <span class='constant'>1</span><span class='escape'>)</span><span class='string'>: </span><span class='escape'>\</span><span class='escape'>(</span>line<span class='escape'>)</span><span class='string'>"</span>);
        }

        row += <span class='constant'>1</span>;
    }
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>2</span> {
    io.<span class='field'>eprintln</span>(<span class='string'>"Usage: </span><span class='escape'>\</span><span class='escape'>(</span>os.<span class='field'>args</span>[<span class='constant'>0</span>]<span class='escape'>)</span><span class='string'> &lt;pattern&gt; [file...]"</span>);
    io.<span class='field'>eprintln</span>(<span class='string'>"Error: pattern not provided"</span>);
    os.<span class='field'>exit</span>(<span class='constant'>1</span>);
}

<span class='keyword'>var</span> pattern = Regex(os.<span class='field'>args</span>[<span class='constant'>1</span>]);
<span class='keyword'>if</span> !pattern {
    io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid pattern"</span>);
    os.<span class='field'>exit</span>(<span class='constant'>1</span>);
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) == <span class='constant'>2</span> {
    <span class='keyword'>return</span> grep(io.<span class='field'>stdin</span>, <span class='string'>"&lt;stdin&gt;"</span>, pattern);
}

<span class='keyword'>var</span> code = <span class='constant'>0</span>;

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>2</span>, <span class='keyword'>len</span>(os.<span class='field'>args</span>) {
    <span class='keyword'>var</span> path = os.<span class='field'>args</span>[i];

    <span class='keyword'>var</span> f = io.<span class='field'>Reader</span>(path);
    <span class='keyword'>if</span> !f {
        io.<span class='field'>println</span>(<span class='string'>"Error: could not open file '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>'"</span>);
        code = <span class='constant'>1</span>;
        <span class='keyword'>continue</span>;
    }

    grep(f, path, pattern);
    f.<span class='field'>close</span>();
}

os.<span class='field'>exit</span>(code);
</pre>
<pre class='code'>
<span class='comment'># TODO: BSX will be removed soon</span>
</pre>
</div>
</div>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='constant'>$ </span>bs grep.bs '\.[A-z]+\(' grep.bs
grep.bs:3:13:     while !f.eof() {
grep.bs:4:21:         var line = f.readln();
grep.bs:6:23:         var col = line.find(pattern);
grep.bs:8:15:             io.println("\(path):\(row + 1):\(col + 1): \(line)");
grep.bs:14:6:     f.close();
grep.bs:18:7:     io.eprintln("Usage: \(os.args[0]) &lt;pattern&gt; [file...]");
grep.bs:19:7:     io.eprintln("Error: pattern not provided");
grep.bs:20:7:     os.exit(1);
grep.bs:25:7:     io.eprintln("Error: invalid pattern");
grep.bs:26:7:     os.exit(1);
grep.bs:38:15:     var f = io.Reader(path);
grep.bs:40:11:         io.println("Error: could not open file '\(path)'");
grep.bs:48:3: os.exit(code);

<span class='constant'>$ </span>cat grep.bs | bs grep.bs '\.[A-z]+\(' <span class='comment'># DON'T CAT INTO GREP!!!</span>
&lt;stdin&gt;:3:13:     while !f.eof() {
&lt;stdin&gt;:4:21:         var line = f.readln();
&lt;stdin&gt;:6:23:         var col = line.find(pattern);
&lt;stdin&gt;:8:15:             io.println("\(path):\(row + 1):\(col + 1): \(line)");
&lt;stdin&gt;:16:7:     io.eprintln("Usage: \(os.args[0]) &lt;pattern&gt; [file...]");
&lt;stdin&gt;:17:7:     io.eprintln("Error: pattern not provided");
&lt;stdin&gt;:18:7:     os.exit(1);
&lt;stdin&gt;:23:7:     io.eprintln("Error: invalid pattern");
&lt;stdin&gt;:24:7:     os.exit(1);
&lt;stdin&gt;:36:15:     var f = io.Reader(path);
&lt;stdin&gt;:38:11:         io.println("Error: could not open file '\(path)'");
&lt;stdin&gt;:44:6:     f.close();
&lt;stdin&gt;:47:3: os.exit(code);
</pre>
</div>
</section>
<section id='s2'>
<h2> Shell</h2>
<p>
A simple UNIX shell.
</p>
<div>
<div class='tabs'>
<button class='tab active' onclick='tabClick(this)'>BS</button>
<button class='tab' onclick='tabClick(this)'>BSX</button>
</div>
<div class='codes'>
<button class='copy' onclick='copyClickCode(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># shell.bs</span>

<span class='keyword'>var</span> home = os.<span class='field'>getenv</span>(<span class='string'>"HOME"</span>);

<span class='comment'># Return a pretty current working directory</span>
<span class='keyword'>fn</span> <span class='function'>pwd</span>() {
    <span class='keyword'>var</span> cwd = os.<span class='field'>getcwd</span>();
    <span class='keyword'>if</span> cwd.<span class='field'>prefix</span>(home) {
        <span class='keyword'>return</span> <span class='string'>"~"</span> ++ cwd.<span class='field'>slice</span>(<span class='keyword'>len</span>(home));
    }

    <span class='keyword'>return</span> cwd;
}

<span class='comment'># Rawdogging shell lexing with regex any%</span>
<span class='keyword'>var</span> delim = Regex(<span class='string'>"[ </span><span class='escape'>\n</span><span class='string'></span><span class='escape'>\t</span><span class='string'>]+"</span>);

<span class='comment'># Previous working directory</span>
<span class='keyword'>var</span> previous = <span class='constant'>nil</span>;

<span class='keyword'>while</span> !io.<span class='field'>stdin</span>.<span class='field'>eof</span>() {
    <span class='keyword'>var</span> args = io.<span class='field'>input</span>(<span class='string'>"</span><span class='escape'>\</span><span class='escape'>(</span>pwd()<span class='escape'>)</span><span class='string'> $ "</span>).<span class='field'>split</span>(delim);
    <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>0</span> {
        <span class='keyword'>continue</span>;
    }

    <span class='keyword'>var</span> cmd = args[<span class='constant'>0</span>];

    <span class='comment'># Builtin 'exit'</span>
    <span class='comment'># Usage:</span>
    <span class='comment'>#   exit         -&gt; Exits with 0</span>
    <span class='comment'>#   exit &lt;CODE&gt;  -&gt; Exits with CODE</span>
    <span class='keyword'>if</span> cmd == <span class='string'>"exit"</span> {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(args) &gt; <span class='constant'>2</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: too many arguments to command '</span><span class='escape'>\</span><span class='escape'>(</span>cmd<span class='escape'>)</span><span class='string'>'"</span>);
            <span class='keyword'>continue</span>;
        }

        <span class='keyword'>var</span> code = <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>2</span> <span class='keyword'>then</span> args[<span class='constant'>1</span>].<span class='field'>tonumber</span>() <span class='keyword'>else</span> <span class='constant'>0</span>;
        <span class='keyword'>if</span> !code {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid exit code '</span><span class='escape'>\</span><span class='escape'>(</span>args[<span class='constant'>1</span>]<span class='escape'>)</span><span class='string'>'"</span>);
            <span class='keyword'>continue</span>;
        }

        os.<span class='field'>exit</span>(code);
    }

    <span class='comment'># Builtin 'cd'</span>
    <span class='comment'># Usage:</span>
    <span class='comment'>#   cd        -&gt; Go to HOME</span>
    <span class='comment'>#   cd &lt;DIR&gt;  -&gt; Go to DIR</span>
    <span class='comment'>#   cd -      -&gt; Go to previous location</span>
    <span class='keyword'>if</span> cmd == <span class='string'>"cd"</span> {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(args) &gt; <span class='constant'>2</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: too many arguments to command '</span><span class='escape'>\</span><span class='escape'>(</span>cmd<span class='escape'>)</span><span class='string'>'"</span>);
            <span class='keyword'>continue</span>;
        }

        <span class='keyword'>var</span> path = <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>2</span> <span class='keyword'>then</span> args[<span class='constant'>1</span>] <span class='keyword'>else</span> <span class='string'>"~"</span>;
        <span class='keyword'>if</span> path == <span class='string'>"-"</span> {
            <span class='keyword'>if</span> !previous {
                io.<span class='field'>eprintln</span>(<span class='string'>"Error: no previous directory to go into"</span>);
                <span class='keyword'>continue</span>;
            }

            path = previous;
        }

        <span class='keyword'>if</span> path.<span class='field'>prefix</span>(<span class='string'>"~"</span>) {
            path = home ++ path.<span class='field'>slice</span>(<span class='constant'>1</span>);
        }

        <span class='keyword'>var</span> current = os.<span class='field'>getcwd</span>();
        <span class='keyword'>if</span> !os.<span class='field'>setcwd</span>(path) {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: the directory '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>' does not exist"</span>);
        }

        previous = current;
        <span class='keyword'>continue</span>;
    }

    <span class='keyword'>var</span> p = os.<span class='field'>Process</span>(args);
    <span class='keyword'>if</span> !p {
        io.<span class='field'>eprintln</span>(<span class='string'>"Error: unknown command '</span><span class='escape'>\</span><span class='escape'>(</span>cmd<span class='escape'>)</span><span class='string'>'"</span>);
        <span class='keyword'>continue</span>;
    }
    p.<span class='field'>wait</span>();
}

<span class='comment'># In case of CTRL-d</span>
io.<span class='field'>println</span>();
</pre>
<pre class='code'>
<span class='comment'># TODO: BSX will be removed soon</span>
</pre>
</div>
</div>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='constant'>$ </span>bs shell.bs
~/Git/bs/examples/shell $ ls -a
.  ..  README.md  shell.bs  shell.bsx
</pre>
</div>
<p>
Use
<a href="https://github.com/hanslub42/rlwrap"><code>rlwrap</code></a>
in order to get readline bindings and filename autocompletion.
</p>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='constant'>$ </span>rlwrap -c bs shell.bs <span class='comment'># Like so</span>
</pre>
</div>
</section>
<section id='s3'>
<h2> Game Of Life</h2>
<p>
An implementation of
<a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway's Game Of Life</a>
</p>
<div>
<div class='tabs'>
<button class='tab active' onclick='tabClick(this)'>BS</button>
<button class='tab' onclick='tabClick(this)'>BSX</button>
</div>
<div class='codes'>
<button class='copy' onclick='copyClickCode(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># GameOfLife.bs</span>

<span class='keyword'>class</span> <span class='class'>GameOfLife</span> {
    init(width, height) {
        <span class='constant'>this</span>.<span class='field'>width</span> = width;
        <span class='constant'>this</span>.<span class='field'>height</span> = height;

        <span class='constant'>this</span>.<span class='field'>board</span> = [];
        <span class='constant'>this</span>.<span class='field'>buffer</span> = [];

        <span class='constant'>this</span>.<span class='field'>board</span>.<span class='field'>resize</span>(width * height);
        <span class='constant'>this</span>.<span class='field'>buffer</span>.<span class='field'>resize</span>(width * height);
    }

    get(x, y) {
        x %= <span class='constant'>this</span>.<span class='field'>width</span>;
        y %= <span class='constant'>this</span>.<span class='field'>height</span>;
        <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>board</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x];
    }

    set(x, y, v) {
        x %= <span class='constant'>this</span>.<span class='field'>width</span>;
        y %= <span class='constant'>this</span>.<span class='field'>height</span>;
        <span class='constant'>this</span>.<span class='field'>board</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x] = v;
    }

    step() {
        <span class='keyword'>fn</span> <span class='function'>set</span>(x, y, v) {
            x %= <span class='constant'>this</span>.<span class='field'>width</span>;
            y %= <span class='constant'>this</span>.<span class='field'>height</span>;
            <span class='constant'>this</span>.<span class='field'>buffer</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x] = v;
        }

        <span class='keyword'>fn</span> <span class='function'>nbors</span>(x, y) {
            <span class='keyword'>var</span> count = <span class='constant'>0</span>;
            <span class='keyword'>for</span> dy <span class='keyword'>in</span> -<span class='constant'>1</span>, <span class='constant'>2</span> {
                <span class='keyword'>for</span> dx <span class='keyword'>in</span> -<span class='constant'>1</span>, <span class='constant'>2</span> {
                    <span class='keyword'>if</span> dx == <span class='constant'>0</span> &amp;&amp; dy == <span class='constant'>0</span> {
                        <span class='keyword'>continue</span>;
                    }

                    <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>get</span>(x + dx, y + dy) {
                        count += <span class='constant'>1</span>;
                    }
                }
            }
            <span class='keyword'>return</span> count;
        }

        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='keyword'>var</span> n = nbors(x, y);
                <span class='keyword'>if</span> n == <span class='constant'>2</span> {
                    set(x, y, <span class='constant'>this</span>.<span class='field'>get</span>(x, y));
                } <span class='keyword'>else</span> {
                    set(x, y, n == <span class='constant'>3</span>);
                }
            }
        }

        <span class='comment'># Swap buffers</span>
        <span class='keyword'>var</span> t = <span class='constant'>this</span>.<span class='field'>board</span>;
        <span class='constant'>this</span>.<span class='field'>board</span> = <span class='constant'>this</span>.<span class='field'>buffer</span>;
        <span class='constant'>this</span>.<span class='field'>buffer</span> = t;
    }

    <span class='comment'># (X, Y) is the center of the glider</span>
    glider(x, y) {
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>0</span>, y - <span class='constant'>1</span>, <span class='constant'>true</span>);
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>1</span>, y + <span class='constant'>0</span>, <span class='constant'>true</span>);
        <span class='constant'>this</span>.<span class='field'>set</span>(x - <span class='constant'>1</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>);
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>0</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>);
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>1</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>);
    }
}

<span class='keyword'>return</span> GameOfLife;
</pre>
<pre class='code'>
<span class='comment'># TODO: BSX will be removed soon</span>
</pre>
</div>
</div>
<section id='s4'>
<h3> Console</h3>
<div>
<div class='tabs'>
<button class='tab active' onclick='tabClick(this)'>BS</button>
<button class='tab' onclick='tabClick(this)'>BSX</button>
</div>
<div class='codes'>
<button class='copy' onclick='copyClickCode(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># game_of_life_tui.bs</span>

<span class='keyword'>var</span> GameOfLife = <span class='keyword'>import</span>(<span class='string'>"GameOfLife"</span>);

<span class='keyword'>var</span> INTERVAL = <span class='constant'>0.1</span>;

<span class='keyword'>class</span> <span class='class'>GameOfLifeTUI</span> &lt; <span class='class'>GameOfLife</span> {
    init(width, height) {
        <span class='constant'>super</span>.<span class='field'>init</span>(width, height);
    }

    show() {
        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                io.<span class='field'>print</span>(<span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>get</span>(x, y) <span class='keyword'>then</span> <span class='string'>"#"</span> <span class='keyword'>else</span> <span class='string'>"."</span>);
            }
            io.<span class='field'>println</span>();
        }
    }
}

<span class='keyword'>var</span> gol = GameOfLifeTUI(<span class='constant'>20</span>, <span class='constant'>10</span>);
gol.<span class='field'>glider</span>(<span class='constant'>1</span>, <span class='constant'>1</span>);

<span class='keyword'>while</span> <span class='constant'>true</span> {
    gol.<span class='field'>show</span>();
    gol.<span class='field'>step</span>();
    io.<span class='field'>print</span>(<span class='string'>"</span><span class='escape'>\e</span><span class='string'>[</span><span class='escape'>\</span><span class='escape'>(</span>gol.<span class='field'>height</span><span class='escape'>)</span><span class='string'>A</span><span class='escape'>\e</span><span class='string'>[</span><span class='escape'>\</span><span class='escape'>(</span>gol.<span class='field'>width</span><span class='escape'>)</span><span class='string'>D"</span>);
    os.<span class='field'>sleep</span>(INTERVAL);
}
</pre>
<pre class='code'>
<span class='comment'># TODO: BSX will be removed soon</span>
</pre>
</div>
</div>
<p>
Run the program.
</p>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='constant'>$ </span>bs game_of_life_tui.bs
</pre>
</div>
</section>
<section id='s5'>
<h3> Raylib</h3>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='comment'>// raylib.c
</span>
<span class='field'>#include</span> <span class='string'>&lt;math.h&gt;</span>

<span class='field'>#include</span> <span class='string'>"bs/object.h"</span>
<span class='field'>#include</span> <span class='string'>"raylib.h"</span>

<span class='class'>Bs_Value</span> rl_init_window(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>3</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>);
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_OBJECT_STR</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> width = args[<span class='constant'>0</span>].as.number;
    <span class='keyword'>const</span> <span class='class'>int</span> height = args[<span class='constant'>1</span>].as.number;
    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *title = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>2</span>].as.object;

    <span class='comment'>// BS strings are null terminated by default for FFI convenience
</span>    <span class='function'>InitWindow</span>(width, height, title-&gt;data);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_close_window(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>CloseWindow</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_window_should_close(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_bool</span>(<span class='function'>WindowShouldClose</span>());
}

<span class='class'>Bs_Value</span> rl_begin_drawing(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>BeginDrawing</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_end_drawing(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>EndDrawing</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_clear_background(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='function'>ClearBackground</span>(<span class='function'>GetColor</span>(args[<span class='constant'>0</span>].as.number));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_set_exit_key(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    SetExitKey(args[<span class='constant'>0</span>].as.number);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_set_config_flags(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    SetConfigFlags(args[<span class='constant'>0</span>].as.number);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_draw_line(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>4</span>, <span class='constant'>BS_VALUE_NUM</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> startPosX = round(args[<span class='constant'>0</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> startPosY = round(args[<span class='constant'>1</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> endPosX = round(args[<span class='constant'>2</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> endPosY = round(args[<span class='constant'>3</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>Color</span> color = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].as.number);

    DrawLine(startPosX, startPosY, endPosX, endPosY, color);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_draw_text(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>3</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>);

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *text = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].as.object;
    <span class='keyword'>const</span> <span class='class'>int</span> x = round(args[<span class='constant'>1</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> y = round(args[<span class='constant'>2</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> size = args[<span class='constant'>3</span>].as.number;
    <span class='keyword'>const</span> <span class='class'>Color</span> color = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].as.number);

    <span class='function'>DrawText</span>(text-&gt;data, x, y, size, color);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_draw_rectangle(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> posX = round(args[<span class='constant'>0</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> posY = round(args[<span class='constant'>1</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> width = round(args[<span class='constant'>2</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>int</span> height = round(args[<span class='constant'>3</span>].as.number);
    <span class='keyword'>const</span> <span class='class'>Color</span> color = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].as.number);

    DrawRectangle(posX, posY, width, height, color);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> rl_get_screen_width(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_num</span>(GetScreenWidth());
}

<span class='class'>Bs_Value</span> rl_get_screen_height(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_num</span>(GetScreenHeight());
}

<span class='class'>Bs_Value</span> rl_get_frame_time(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_num</span>(GetFrameTime());
}

<span class='class'>Bs_Value</span> rl_get_mouse_x(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_num</span>(GetMouseX());
}

<span class='class'>Bs_Value</span> rl_get_mouse_y(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_num</span>(GetMouseY());
}

<span class='class'>Bs_Value</span> rl_is_mouse_button_released(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_bool</span>(IsMouseButtonReleased(args[<span class='constant'>0</span>].as.number));
}

<span class='class'>Bs_Value</span> rl_is_key_pressed(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='function'>bs_value_bool</span>(IsKeyPressed(args[<span class='constant'>0</span>].as.number));
}

<span class='class'>Bs_Value</span> rl_measure_text(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>2</span>);
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>);
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>);

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *text = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].as.object;
    <span class='keyword'>const</span> <span class='class'>int</span> size = args[<span class='constant'>1</span>].as.number;

    <span class='keyword'>return</span> <span class='function'>bs_value_num</span>(MeasureText(text-&gt;data, size));
}

<span class='constant'>BS_LIBRARY_INIT</span> <span class='class'>void</span> bs_library_init(<span class='class'>Bs</span> *bs, <span class='class'>Bs_C_Lib</span> *library) {
    <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='class'>Bs_FFI</span> ffi[] = {
        {<span class='string'>"init_window"</span>, rl_init_window},
        {<span class='string'>"close_window"</span>, rl_close_window},
        {<span class='string'>"window_should_close"</span>, rl_window_should_close},
        {<span class='string'>"begin_drawing"</span>, rl_begin_drawing},
        {<span class='string'>"end_drawing"</span>, rl_end_drawing},
        {<span class='string'>"clear_background"</span>, rl_clear_background},
        {<span class='string'>"set_exit_key"</span>, rl_set_exit_key},
        {<span class='string'>"set_config_flags"</span>, rl_set_config_flags},
        {<span class='string'>"draw_line"</span>, rl_draw_line},
        {<span class='string'>"draw_text"</span>, rl_draw_text},
        {<span class='string'>"draw_rectangle"</span>, rl_draw_rectangle},
        {<span class='string'>"get_screen_width"</span>, rl_get_screen_width},
        {<span class='string'>"get_screen_height"</span>, rl_get_screen_height},
        {<span class='string'>"get_frame_time"</span>, rl_get_frame_time},
        {<span class='string'>"get_mouse_x"</span>, rl_get_mouse_x},
        {<span class='string'>"get_mouse_y"</span>, rl_get_mouse_y},
        {<span class='string'>"is_mouse_button_released"</span>, rl_is_mouse_button_released},
        {<span class='string'>"is_key_pressed"</span>, rl_is_key_pressed},
        {<span class='string'>"measure_text"</span>, rl_measure_text},
    };
    <span class='function'>bs_c_lib_ffi</span>(bs, library, ffi, <span class='function'>bs_c_array_size</span>(ffi));

    bs_c_lib_set(bs, library, Bs_Sv_Static(<span class='string'>"MOUSE_BUTTON_LEFT"</span>), <span class='function'>bs_value_num</span>(MOUSE_BUTTON_LEFT));

    bs_c_lib_set(
        bs, library, Bs_Sv_Static(<span class='string'>"FLAG_WINDOW_RESIZABLE"</span>), <span class='function'>bs_value_num</span>(FLAG_WINDOW_RESIZABLE));
}
</pre>
</div>
<p>
Compile the raylib module.
</p>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='constant'>$ </span>cc -o raylib.so -fPIC -shared raylib.c -lbs -lraylib    <span class='comment'># On Linux</span>
<span class='constant'>$ </span>cc -o raylib.dylib -fPIC -shared raylib.c -lbs -lraylib <span class='comment'># On macOS</span>
<span class='constant'>$ </span>cl /LD /Fe:raylib.dll raylib.c bs.lib raylib.lib        <span class='comment'># On Windows</span>
</pre>
</div>
<div>
<div class='tabs'>
<button class='tab active' onclick='tabClick(this)'>BS</button>
<button class='tab' onclick='tabClick(this)'>BSX</button>
</div>
<div class='codes'>
<button class='copy' onclick='copyClickCode(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># game_of_life_raylib.bs</span>

<span class='keyword'>var</span> rl = <span class='keyword'>import</span>(<span class='string'>"raylib"</span>);
<span class='keyword'>var</span> GameOfLife = <span class='keyword'>import</span>(<span class='string'>"GameOfLife"</span>);

<span class='keyword'>var</span> GRID = <span class='constant'>0x5A524CFF</span>;
<span class='keyword'>var</span> BACKGROUND = <span class='constant'>0x282828FF</span>;
<span class='keyword'>var</span> FOREGROUND = <span class='constant'>0x89B482FF</span>;

<span class='keyword'>var</span> INTERVAL = <span class='constant'>0.1</span>;
<span class='keyword'>var</span> FONT_SIZE = <span class='constant'>30</span>;

<span class='keyword'>var</span> width = <span class='constant'>800</span>;
<span class='keyword'>var</span> height = <span class='constant'>600</span>;

<span class='keyword'>var</span> cell_size = <span class='constant'>0</span>;
<span class='keyword'>var</span> padding_x = <span class='constant'>0</span>;
<span class='keyword'>var</span> padding_y = <span class='constant'>0</span>;

<span class='keyword'>class</span> <span class='class'>GameOfLifeRaylib</span> &lt; <span class='class'>GameOfLife</span> {
    init(width, height) {
        <span class='constant'>super</span>.<span class='field'>init</span>(width, height);
        <span class='constant'>this</span>.<span class='field'>clock</span> = <span class='constant'>0</span>;
        <span class='constant'>this</span>.<span class='field'>paused</span> = <span class='constant'>false</span>;
    }

    show() {
        width = rl.<span class='field'>get_screen_width</span>();
        height = rl.<span class='field'>get_screen_height</span>() - FONT_SIZE * <span class='constant'>1.2</span>;

        <span class='keyword'>var</span> cw = width / <span class='constant'>this</span>.<span class='field'>width</span>;
        <span class='keyword'>var</span> ch = height / <span class='constant'>this</span>.<span class='field'>height</span>;
        cell_size = cw.<span class='field'>min</span>(ch);

        padding_x = (width - <span class='constant'>this</span>.<span class='field'>width</span> * cell_size) / <span class='constant'>2</span>;
        padding_y = (height - <span class='constant'>this</span>.<span class='field'>height</span> * cell_size) / <span class='constant'>2</span>;

        rl.<span class='field'>draw_rectangle</span>(
            padding_x,
            padding_y,
            <span class='constant'>this</span>.<span class='field'>width</span> * cell_size,
            <span class='constant'>this</span>.<span class='field'>height</span> * cell_size,
            BACKGROUND);

        {
            <span class='keyword'>var</span> label = <span class='string'>"Click to toggle cell, Space to play/pause"</span>;
            rl.<span class='field'>draw_text</span>(
                label,
                (width - rl.<span class='field'>measure_text</span>(label, FONT_SIZE)) / <span class='constant'>2</span>,
                <span class='constant'>this</span>.<span class='field'>height</span> * cell_size + FONT_SIZE * <span class='constant'>0.1</span>,
                FONT_SIZE,
                FOREGROUND);
        }

        <span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> + <span class='constant'>1</span> {
            <span class='keyword'>var</span> x = padding_x + i * cell_size;
            rl.<span class='field'>draw_line</span>(x, <span class='constant'>0</span>, x, <span class='constant'>this</span>.<span class='field'>height</span> * cell_size, GRID);
        }

        <span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> + <span class='constant'>1</span> {
            <span class='keyword'>var</span> y = padding_y + i * cell_size;
            rl.<span class='field'>draw_line</span>(padding_x, y, padding_x + <span class='constant'>this</span>.<span class='field'>width</span> * cell_size, y, GRID);
        }

        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>get</span>(x, y) {
                    rl.<span class='field'>draw_rectangle</span>(
                        padding_x + x * cell_size,
                        padding_y + y * cell_size,
                        cell_size,
                        cell_size,
                        FOREGROUND);
                }
            }
        }
    }
}

rl.<span class='field'>init_window</span>(width, height, <span class='string'>"Game Of Life"</span>);
rl.<span class='field'>set_exit_key</span>(ascii.<span class='field'>code</span>(<span class='string'>"Q"</span>));
rl.<span class='field'>set_config_flags</span>(rl.<span class='field'>FLAG_WINDOW_RESIZABLE</span>);

<span class='keyword'>var</span> gol = GameOfLifeRaylib(<span class='constant'>20</span>, <span class='constant'>20</span>);
gol.<span class='field'>glider</span>(<span class='constant'>2</span>, <span class='constant'>2</span>);

<span class='keyword'>while</span> !rl.<span class='field'>window_should_close</span>() {
    rl.<span class='field'>begin_drawing</span>();
    rl.<span class='field'>clear_background</span>(<span class='constant'>0x181818FF</span>);

    gol.<span class='field'>show</span>();

    <span class='keyword'>if</span> !gol.<span class='field'>paused</span> {
        gol.<span class='field'>clock</span> += rl.<span class='field'>get_frame_time</span>();
        <span class='keyword'>if</span> gol.<span class='field'>clock</span> &gt;= INTERVAL {
            gol.<span class='field'>clock</span> = <span class='constant'>0</span>;
            gol.<span class='field'>step</span>();
        }
    }

    <span class='keyword'>if</span> rl.<span class='field'>is_key_pressed</span>(ascii.<span class='field'>code</span>(<span class='string'>" "</span>)) {
        gol.<span class='field'>paused</span> = !gol.<span class='field'>paused</span>;
    }

    <span class='keyword'>if</span> rl.<span class='field'>is_mouse_button_released</span>(rl.<span class='field'>MOUSE_BUTTON_LEFT</span>) {
        <span class='keyword'>var</span> x = ((rl.<span class='field'>get_mouse_x</span>() - padding_x) / cell_size).<span class='field'>floor</span>();
        <span class='keyword'>var</span> y = ((rl.<span class='field'>get_mouse_y</span>() - padding_y) / cell_size).<span class='field'>floor</span>();
        gol.<span class='field'>set</span>(x, y, !gol.<span class='field'>get</span>(x, y));
    }

    rl.<span class='field'>end_drawing</span>();
}

rl.<span class='field'>close_window</span>();
</pre>
<pre class='code'>
<span class='comment'># TODO: BSX will be removed soon</span>
</pre>
</div>
</div>
<p>
Run the program.
</p>
<div class='codes shell'>
<button class='copy' onclick='copyClickShell(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active shell'>
<span class='constant'>$ </span>bs game_of_life_raylib.bs
</pre>
</div>
</section>
</section>
</main>
<nav id='sidebar' class='collapsed'>
<ul>
<li>
<a href='#s0'> <code>cat</code></a>
</li>
<li>
<a href='#s1'> <code>grep</code></a>
</li>
<li>
<a href='#s2'> Shell</a>
</li>
<li>
<a href='#s3'> Game Of Life</a>
<ul>
<li>
<a href='#s4'> Console</a>
</li>
<li>
<a href='#s5'> Raylib</a>
</li>
</ul>
</li>
</ul>
</nav>
<script src='script.js'></script>
</body>
</html>
