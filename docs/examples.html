<!doctype html>
<html>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<link rel='stylesheet' href='style.css'>
</head>
<body>
<header id='header'>
<button id='toggle-sidebar' aria-label='Toggle Sidebar'>â˜°</button>
<h1>Examples</h1>
</header>
<main id='main'>
<a href='index.html' class='navigation-icon'>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='30px' height='30px' viewBox='0 0 30 30' version='1.1'><g id='surface1'><path fill='#D4BE98' d='M 29.625 13.960938 L 16.132812 2.09375 C 15.507812 1.542969 14.488281 1.542969 13.867188 2.09375 L 0.382812 13.960938 C -0.25 14.511719 -0.0820312 14.960938 0.757812 14.960938 L 4.917969 14.960938 L 4.917969 27.113281 C 4.917969 27.773438 5.464844 28.320312 6.132812 28.320312 L 11.222656 28.320312 L 11.222656 20.328125 C 11.222656 19.667969 11.769531 19.121094 12.433594 19.121094 L 17.574219 19.121094 C 18.246094 19.121094 18.789062 19.65625 18.789062 20.328125 L 18.789062 28.320312 L 23.878906 28.320312 C 24.550781 28.320312 25.089844 27.777344 25.089844 27.113281 L 25.089844 14.957031 L 29.253906 14.957031 C 30.078125 14.957031 30.246094 14.511719 29.625 13.960938 Z M 29.625 13.960938 '/></g></a>
<section id='s0'>
<h2><code>cat</code></h2>
<p>
The UNIX <code>cat</code> coreutil.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// cat.bs</span>

<span class='keyword'>var</span> code = <span class='constant'>0</span>

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>1</span>, <span class='keyword'>len</span>(os.<span class='field'>args</span>) {
    <span class='keyword'>var</span> path = os.<span class='field'>args</span>[i]
    <span class='keyword'>var</span> contents = io.<span class='function'>readfile</span>(path)
    <span class='keyword'>if</span> !contents {
        io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: could not read file &apos;</span><span class='escape'>{</span>path<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
        code = <span class='constant'>1</span>
        <span class='keyword'>continue</span>
    }

    io.<span class='function'>print</span>(contents)
}

os.<span class='function'>exit</span>(code)
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs cat.bs cat.bs <span class='comment'># Poor man&apos;s quine</span>
var code = 0

for i in 1, len(os.args) {
    var path = os.args[i]
    var contents = io.readfile(path)
    if !contents {
        io.eprintln(&quot;Error: could not read file &apos;{path}&apos;&quot;)
        code = 1
        continue
    }

    io.print(contents)
}

os.exit(code)
</pre>
</div>
</section>
<section id='s1'>
<h2><code>ls</code></h2>
<p>
The UNIX <code>ls</code> coreutil.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// ls.bs</span>

<span class='keyword'>fn</span> <span class='function'>compare</span>(a, b) {
    <span class='keyword'>if</span> a.<span class='function'>suffix</span>(<span class='string'>&quot;/&quot;</span>) &amp;&amp; !b.<span class='function'>suffix</span>(<span class='string'>&quot;/&quot;</span>) {
        <span class='keyword'>return</span> <span class='constant'>true</span>
    }

    <span class='keyword'>if</span> !a.<span class='function'>suffix</span>(<span class='string'>&quot;/&quot;</span>) &amp;&amp; b.<span class='function'>suffix</span>(<span class='string'>&quot;/&quot;</span>) {
        <span class='keyword'>return</span> <span class='constant'>false</span>
    }

    <span class='keyword'>return</span> a.<span class='function'>compare</span>(b) &lt; <span class='constant'>0</span>
}

io.<span class='function'>readdir</span>(<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &gt;= <span class='constant'>2</span> <span class='keyword'>then</span> os.<span class='field'>args</span>[<span class='constant'>1</span>] <span class='keyword'>else</span> <span class='string'>&quot;.&quot;</span>)
    .<span class='function'>map</span>(<span class='keyword'>fn</span> (e) -&gt; e.<span class='function'>name</span>() $ <span class='keyword'>if</span> e.<span class='function'>isdir</span>() <span class='keyword'>then</span> <span class='string'>&quot;/&quot;</span> <span class='keyword'>else</span> <span class='string'>&quot;&quot;</span>)
    .<span class='function'>sort</span>(compare)
    .<span class='function'>map</span>(io.<span class='field'>println</span>)
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs ls.bs
README.md
ls.bs
</pre>
</div>
</section>
<section id='s2'>
<h2><code>grep</code></h2>
<p>
The UNIX <code>grep</code> coreutil.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// grep.bs</span>

<span class='keyword'>fn</span> <span class='function'>grep</span>(f, path, pattern) {
    <span class='keyword'>var</span> row = <span class='constant'>0</span>
    <span class='keyword'>while</span> !f.<span class='function'>eof</span>() {
        <span class='keyword'>var</span> line = f.<span class='function'>readln</span>()

        <span class='keyword'>var</span> col = line.<span class='function'>find</span>(pattern)
        <span class='keyword'>if</span> col {
            io.<span class='function'>println</span>(<span class='string'>&quot;</span><span class='escape'>{</span>path<span class='escape'>}</span><span class='string'>:</span><span class='escape'>{</span>row + <span class='constant'>1</span><span class='escape'>}</span><span class='string'>:</span><span class='escape'>{</span>col + <span class='constant'>1</span><span class='escape'>}</span><span class='string'>: </span><span class='escape'>{</span>line<span class='escape'>}</span><span class='string'>&quot;</span>)
        }

        row += <span class='constant'>1</span>
    }
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>2</span> {
    io.<span class='function'>eprintln</span>(<span class='string'>&quot;Usage: </span><span class='escape'>{</span>os.<span class='field'>args</span>[<span class='constant'>0</span>]<span class='escape'>}</span><span class='string'> &lt;pattern&gt; [file...]&quot;</span>)
    io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: pattern not provided&quot;</span>)
    os.<span class='function'>exit</span>(<span class='constant'>1</span>)
}

<span class='keyword'>var</span> pattern = <span class='function'>Regex</span>(os.<span class='field'>args</span>[<span class='constant'>1</span>])
<span class='keyword'>if</span> !pattern {
    io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: invalid pattern&quot;</span>)
    os.<span class='function'>exit</span>(<span class='constant'>1</span>)
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) == <span class='constant'>2</span> {
    <span class='keyword'>return</span> <span class='function'>grep</span>(io.<span class='field'>stdin</span>, <span class='string'>&quot;&lt;stdin&gt;&quot;</span>, pattern)
}

<span class='keyword'>var</span> code = <span class='constant'>0</span>

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>2</span>, <span class='keyword'>len</span>(os.<span class='field'>args</span>) {
    <span class='keyword'>var</span> path = os.<span class='field'>args</span>[i]

    <span class='keyword'>var</span> f = io.<span class='function'>Reader</span>(path)
    <span class='keyword'>if</span> !f {
        io.<span class='function'>println</span>(<span class='string'>&quot;Error: could not open file &apos;</span><span class='escape'>{</span>path<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
        code = <span class='constant'>1</span>
        <span class='keyword'>continue</span>
    }

    <span class='function'>grep</span>(f, path, pattern)
    f.<span class='function'>close</span>()
}

os.<span class='function'>exit</span>(code)
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs grep.bs &apos;\.[A-z]+\(&apos; grep.bs
grep.bs:3:13:     while !f.eof() {
grep.bs:4:21:         var line = f.readln()
grep.bs:6:23:         var col = line.find(pattern)
grep.bs:8:15:             io.println(&quot;{path}:{row + 1}:{col + 1}: {line}&quot;)
grep.bs:16:7:     io.eprintln(&quot;Usage: {os.args[0]} &lt;pattern&gt; [file...]&quot;)
grep.bs:17:7:     io.eprintln(&quot;Error: pattern not provided&quot;)
grep.bs:18:7:     os.exit(1)
grep.bs:23:7:     io.eprintln(&quot;Error: invalid pattern&quot;)
grep.bs:24:7:     os.exit(1)
grep.bs:36:15:     var f = io.Reader(path)
grep.bs:38:11:         io.println(&quot;Error: could not open file &apos;{path}&apos;&quot;)
grep.bs:44:6:     f.close()
grep.bs:47:3: os.exit(code)

<span class='string'>$ </span>cat grep.bs | bs grep.bs &apos;\.[A-z]+\(&apos; <span class='comment'># DON&apos;T CAT INTO GREP!!!</span>
&lt;stdin&gt;:3:13:     while !f.eof() {
&lt;stdin&gt;:4:21:         var line = f.readln()
&lt;stdin&gt;:6:23:         var col = line.find(pattern)
&lt;stdin&gt;:8:15:             io.println(&quot;{path}:{row + 1}:{col + 1}: {line}&quot;)
&lt;stdin&gt;:16:7:     io.eprintln(&quot;Usage: {os.args[0]} &lt;pattern&gt; [file...]&quot;)
&lt;stdin&gt;:17:7:     io.eprintln(&quot;Error: pattern not provided&quot;)
&lt;stdin&gt;:18:7:     os.exit(1)
&lt;stdin&gt;:23:7:     io.eprintln(&quot;Error: invalid pattern&quot;)
&lt;stdin&gt;:24:7:     os.exit(1)
&lt;stdin&gt;:36:15:     var f = io.Reader(path)
&lt;stdin&gt;:38:11:         io.println(&quot;Error: could not open file &apos;{path}&apos;&quot;)
&lt;stdin&gt;:44:6:     f.close()
&lt;stdin&gt;:47:3: os.exit(code)
</pre>
</div>
</section>
<section id='s3'>
<h2>Shell</h2>
<p>
A simple UNIX shell.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// shell.bs</span>

<span class='keyword'>var</span> home = os.<span class='function'>getenv</span>(<span class='string'>&quot;HOME&quot;</span>)

<span class='comment'>// Return a pretty current working directory</span>
<span class='keyword'>fn</span> <span class='function'>pwd</span>() {
    <span class='keyword'>var</span> cwd = os.<span class='function'>getcwd</span>()
    <span class='keyword'>if</span> cwd.<span class='function'>prefix</span>(home) {
        <span class='keyword'>return</span> <span class='string'>&quot;~&quot;</span> $ cwd.<span class='function'>slice</span>(<span class='keyword'>len</span>(home))
    }

    <span class='keyword'>return</span> cwd
}

<span class='comment'>// Rawdogging shell lexing with regex any%</span>
<span class='keyword'>var</span> delim = <span class='function'>Regex</span>(<span class='string'>&quot;[ </span><span class='escape'>\n</span><span class='string'></span><span class='escape'>\t</span><span class='string'>]+&quot;</span>)

<span class='comment'>// Previous working directory</span>
<span class='keyword'>var</span> previous = <span class='constant'>nil</span>

<span class='keyword'>while</span> !io.<span class='field'>stdin</span>.<span class='function'>eof</span>() {
    <span class='keyword'>var</span> args = io.<span class='function'>input</span>(<span class='string'>&quot;</span><span class='escape'>{</span><span class='function'>pwd</span>()<span class='escape'>}</span><span class='string'> $ &quot;</span>).<span class='function'>split</span>(delim)
    <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>0</span> {
        <span class='keyword'>continue</span>
    }

    <span class='keyword'>var</span> cmd = args[<span class='constant'>0</span>]

    <span class='comment'>// Builtin &apos;exit&apos;</span>
    <span class='comment'>// Usage:</span>
    <span class='comment'>//   exit         -&gt; Exits with 0</span>
    <span class='comment'>//   exit &lt;CODE&gt;  -&gt; Exits with CODE</span>
    <span class='keyword'>if</span> cmd == <span class='string'>&quot;exit&quot;</span> {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(args) &gt; <span class='constant'>2</span> {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: too many arguments to command &apos;</span><span class='escape'>{</span>cmd<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            <span class='keyword'>continue</span>
        }

        <span class='keyword'>var</span> code = <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>2</span> <span class='keyword'>then</span> args[<span class='constant'>1</span>].<span class='function'>tonumber</span>() <span class='keyword'>else</span> <span class='constant'>0</span>
        <span class='keyword'>if</span> !code {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: invalid exit code &apos;</span><span class='escape'>{</span>args[<span class='constant'>1</span>]<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            <span class='keyword'>continue</span>
        }

        os.<span class='function'>exit</span>(code)
    }

    <span class='comment'>// Builtin &apos;cd&apos;</span>
    <span class='comment'>// Usage:</span>
    <span class='comment'>//   cd        -&gt; Go to HOME</span>
    <span class='comment'>//   cd &lt;DIR&gt;  -&gt; Go to DIR</span>
    <span class='comment'>//   cd -      -&gt; Go to previous location</span>
    <span class='keyword'>if</span> cmd == <span class='string'>&quot;cd&quot;</span> {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(args) &gt; <span class='constant'>2</span> {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: too many arguments to command &apos;</span><span class='escape'>{</span>cmd<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            <span class='keyword'>continue</span>
        }

        <span class='keyword'>var</span> path = <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>2</span> <span class='keyword'>then</span> args[<span class='constant'>1</span>] <span class='keyword'>else</span> <span class='string'>&quot;~&quot;</span>
        <span class='keyword'>if</span> path == <span class='string'>&quot;-&quot;</span> {
            <span class='keyword'>if</span> !previous {
                io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: no previous directory to go into&quot;</span>)
                <span class='keyword'>continue</span>
            }

            path = previous
        }

        <span class='keyword'>if</span> path.<span class='function'>prefix</span>(<span class='string'>&quot;~&quot;</span>) {
            path = home $ path.<span class='function'>slice</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> current = os.<span class='function'>getcwd</span>()
        <span class='keyword'>if</span> !os.<span class='function'>setcwd</span>(path) {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: the directory &apos;</span><span class='escape'>{</span>path<span class='escape'>}</span><span class='string'>&apos; does not exist&quot;</span>)
        }

        previous = current
        <span class='keyword'>continue</span>
    }

    <span class='keyword'>var</span> p = os.<span class='function'>Process</span>(args)
    <span class='keyword'>if</span> !p {
        io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: unknown command &apos;</span><span class='escape'>{</span>cmd<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
        <span class='keyword'>continue</span>
    }
    p.<span class='function'>wait</span>()
}

<span class='comment'>// In case of CTRL-d</span>
io.<span class='function'>println</span>()
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs shell.bs
~/Git/bs/examples/shell $ ls -a
.  ..  README.md  shell.bs
</pre>
</div>
<p>
Use
<a href="https://github.com/hanslub42/rlwrap"><code>rlwrap</code></a>
in order to get readline bindings and filename autocompletion.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>rlwrap -c bs shell.bs <span class='comment'># Like so</span>
</pre>
</div>
</section>
<section id='s4'>
<h2>Rule110</h2>
<p>
An implementation of
<a href="https://en.wikipedia.org/wiki/Rule_110">Rule110</a>
for proof of Turing Completeness.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// rule110.bs</span>

<span class='keyword'>var</span> board = [].<span class='function'>resize</span>(<span class='constant'>30</span>).<span class='function'>fill</span>(<span class='constant'>0</span>)
board[<span class='keyword'>len</span>(board) - <span class='constant'>2</span>] = <span class='constant'>1</span>

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='keyword'>len</span>(board) - <span class='constant'>2</span> {
    <span class='keyword'>for</span> _, j <span class='keyword'>in</span> board {
        io.<span class='function'>print</span>(<span class='keyword'>if</span> j != <span class='constant'>0</span> <span class='keyword'>then</span> <span class='string'>&quot;*&quot;</span> <span class='keyword'>else</span> <span class='string'>&quot; &quot;</span>)
    }
    io.<span class='function'>println</span>()

    <span class='keyword'>var</span> pattern = (board[<span class='constant'>0</span>] &lt;&lt; <span class='constant'>1</span>) | board[<span class='constant'>1</span>]
    <span class='keyword'>for</span> j <span class='keyword'>in</span> <span class='constant'>1</span>, <span class='keyword'>len</span>(board) - <span class='constant'>1</span> {
        pattern = ((pattern &lt;&lt; <span class='constant'>1</span>) &amp; <span class='constant'>7</span>) | board[j + <span class='constant'>1</span>]
        board[j] = (<span class='constant'>110</span> &gt;&gt; pattern) &amp; <span class='constant'>1</span>
    }
}
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs rule110.bs
                            *
                           **
                          ***
                         ** *
                        *****
                       **   *
                      ***  **
                     ** * ***
                    ******* *
                   **     ***
                  ***    ** *
                 ** *   *****
                *****  **   *
               **   * ***  **
              ***  **** * ***
             ** * **  ***** *
            ******** **   ***
           **      ****  ** *
          ***     **  * *****
         ** *    *** ****   *
        *****   ** ***  *  **
       **   *  ***** * ** ***
      ***  ** **   ******** *
     ** * ******  **      ***
    *******    * ***     ** *
   **     *   **** *    *****
  ***    **  **  ***   **   *
 ** *   *** *** ** *  ***  **
</pre>
</div>
</section>
<section id='s5'>
<h2>Game Of Life</h2>
<p>
An implementation of
<a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway's Game Of Life</a>
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// GameOfLife.bs</span>

<span class='keyword'>class</span> <span class='class'>GameOfLife</span> {
    <span class='function'>init</span>(width, height) {
        <span class='constant'>this</span>.<span class='field'>width</span> = width
        <span class='constant'>this</span>.<span class='field'>height</span> = height

        <span class='constant'>this</span>.<span class='field'>board</span> = []
        <span class='constant'>this</span>.<span class='field'>buffer</span> = []

        <span class='constant'>this</span>.<span class='field'>board</span>.<span class='function'>resize</span>(width * height)
        <span class='constant'>this</span>.<span class='field'>buffer</span>.<span class='function'>resize</span>(width * height)
    }

    <span class='function'>get</span>(x, y) {
        x %= <span class='constant'>this</span>.<span class='field'>width</span>
        y %= <span class='constant'>this</span>.<span class='field'>height</span>
        <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>board</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x]
    }

    <span class='function'>set</span>(x, y, v) {
        x %= <span class='constant'>this</span>.<span class='field'>width</span>
        y %= <span class='constant'>this</span>.<span class='field'>height</span>
        <span class='constant'>this</span>.<span class='field'>board</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x] = v
    }

    <span class='function'>step</span>() {
        <span class='keyword'>fn</span> <span class='function'>set</span>(x, y, v) {
            x %= <span class='constant'>this</span>.<span class='field'>width</span>
            y %= <span class='constant'>this</span>.<span class='field'>height</span>
            <span class='constant'>this</span>.<span class='field'>buffer</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x] = v
        }

        <span class='keyword'>fn</span> <span class='function'>nbors</span>(x, y) {
            <span class='keyword'>var</span> count = <span class='constant'>0</span>
            <span class='keyword'>for</span> dy <span class='keyword'>in</span> -<span class='constant'>1</span>, <span class='constant'>2</span> {
                <span class='keyword'>for</span> dx <span class='keyword'>in</span> -<span class='constant'>1</span>, <span class='constant'>2</span> {
                    <span class='keyword'>if</span> dx == <span class='constant'>0</span> &amp;&amp; dy == <span class='constant'>0</span> {
                        <span class='keyword'>continue</span>
                    }

                    <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='function'>get</span>(x + dx, y + dy) {
                        count += <span class='constant'>1</span>
                    }
                }
            }
            <span class='keyword'>return</span> count
        }

        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='keyword'>var</span> n = <span class='function'>nbors</span>(x, y)
                <span class='keyword'>if</span> n == <span class='constant'>2</span> {
                    <span class='function'>set</span>(x, y, <span class='constant'>this</span>.<span class='function'>get</span>(x, y))
                } <span class='keyword'>else</span> {
                    <span class='function'>set</span>(x, y, n == <span class='constant'>3</span>)
                }
            }
        }

        <span class='comment'>// Swap buffers</span>
        <span class='keyword'>var</span> t = <span class='constant'>this</span>.<span class='field'>board</span>
        <span class='constant'>this</span>.<span class='field'>board</span> = <span class='constant'>this</span>.<span class='field'>buffer</span>
        <span class='constant'>this</span>.<span class='field'>buffer</span> = t
    }

    <span class='comment'>// (X, Y) is the center of the glider</span>
    <span class='function'>glider</span>(x, y) {
        <span class='constant'>this</span>.<span class='function'>set</span>(x + <span class='constant'>0</span>, y - <span class='constant'>1</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='function'>set</span>(x + <span class='constant'>1</span>, y + <span class='constant'>0</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='function'>set</span>(x - <span class='constant'>1</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='function'>set</span>(x + <span class='constant'>0</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='function'>set</span>(x + <span class='constant'>1</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>)
    }
}

<span class='keyword'>return</span> GameOfLife
</pre>
</div>
<section id='s6'>
<h3>Console</h3>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// game_of_life_tui.bs</span>

<span class='keyword'>var</span> GameOfLife = <span class='keyword'>import</span>(<span class='string'>&quot;GameOfLife&quot;</span>)

<span class='keyword'>var</span> INTERVAL = <span class='constant'>0.1</span>

<span class='keyword'>class</span> <span class='class'>GameOfLifeTUI</span> &lt; GameOfLife {
    <span class='function'>init</span>(width, height) {
        <span class='constant'>super</span>.<span class='function'>init</span>(width, height)
    }

    <span class='function'>show</span>() {
        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                io.<span class='function'>print</span>(<span class='keyword'>if</span> <span class='constant'>this</span>.<span class='function'>get</span>(x, y) <span class='keyword'>then</span> <span class='string'>&quot;#&quot;</span> <span class='keyword'>else</span> <span class='string'>&quot;.&quot;</span>)
            }
            io.<span class='function'>println</span>()
        }
    }
}

<span class='keyword'>var</span> gol = <span class='function'>GameOfLifeTUI</span>(<span class='constant'>20</span>, <span class='constant'>10</span>)
gol.<span class='function'>glider</span>(<span class='constant'>1</span>, <span class='constant'>1</span>)

<span class='keyword'>while</span> <span class='constant'>true</span> {
    gol.<span class='function'>show</span>()
    gol.<span class='function'>step</span>()
    io.<span class='function'>print</span>(<span class='string'>&quot;</span><span class='escape'>\e</span><span class='string'>[</span><span class='escape'>{</span>gol.<span class='field'>height</span><span class='escape'>}</span><span class='string'>A</span><span class='escape'>\e</span><span class='string'>[</span><span class='escape'>{</span>gol.<span class='field'>width</span><span class='escape'>}</span><span class='string'>D&quot;</span>)
    os.<span class='function'>sleep</span>(INTERVAL)
}
</pre>
</div>
<p>
Run the program.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs game_of_life_tui.bs
</pre>
</div>
</section>
<section id='s7'>
<h3>Raylib</h3>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// raylib.c</span>

<span class='keyword'>#include</span> <span class='string'>&lt;math.h&gt;</span>

<span class='keyword'>#include</span> <span class='string'>&lt;bs/object.h&gt;</span>
<span class='keyword'>#include</span> <span class='string'>&lt;raylib.h&gt;</span>

<span class='class'>Bs_Value</span> <span class='function'>rl_init_window</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>3</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_OBJECT_STR</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> width = args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>int</span> height = args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *title = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>2</span>].<span class='field'>as</span>.<span class='field'>object</span>;

    <span class='comment'>// BS strings are null terminated by default for FFI convenience</span>
    <span class='function'>InitWindow</span>(width, height, title-&gt;<span class='field'>data</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_close_window</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>CloseWindow</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_window_should_close</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(<span class='function'>WindowShouldClose</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_begin_drawing</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>BeginDrawing</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_end_drawing</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>EndDrawing</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_clear_background</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='function'>ClearBackground</span>(<span class='function'>GetColor</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_set_exit_key</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='function'>SetExitKey</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_set_config_flags</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='function'>SetConfigFlags</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_draw_line</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>4</span>, <span class='constant'>BS_VALUE_NUM</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> startPosX = <span class='function'>round</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> startPosY = <span class='function'>round</span>(args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> endPosX = <span class='function'>round</span>(args[<span class='constant'>2</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> endPosY = <span class='function'>round</span>(args[<span class='constant'>3</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>Color</span> color = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].<span class='field'>as</span>.<span class='field'>number</span>);

    <span class='function'>DrawLine</span>(startPosX, startPosY, endPosX, endPosY, color);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_draw_text</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='constant'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>3</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>);

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *text = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>object</span>;
    <span class='keyword'>const</span> <span class='class'>int</span> x = <span class='function'>round</span>(args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> y = <span class='function'>round</span>(args[<span class='constant'>2</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> size = args[<span class='constant'>3</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>Color</span> color = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].<span class='field'>as</span>.<span class='field'>number</span>);

    <span class='function'>DrawText</span>(text-&gt;<span class='field'>data</span>, x, y, size, color);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_draw_rectangle</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> posX = <span class='function'>round</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> posY = <span class='function'>round</span>(args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> width = <span class='function'>round</span>(args[<span class='constant'>2</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>int</span> height = <span class='function'>round</span>(args[<span class='constant'>3</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>const</span> <span class='class'>Color</span> color = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].<span class='field'>as</span>.<span class='field'>number</span>);

    <span class='function'>DrawRectangle</span>(posX, posY, width, height, color);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_get_screen_width</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='function'>GetScreenWidth</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_get_screen_height</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='function'>GetScreenHeight</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_get_frame_time</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='function'>GetFrameTime</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_get_mouse_x</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='function'>GetMouseX</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_get_mouse_y</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='function'>GetMouseY</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_is_mouse_button_released</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(<span class='function'>IsMouseButtonReleased</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>));
}

<span class='class'>Bs_Value</span> <span class='function'>rl_is_key_pressed</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(<span class='function'>IsKeyPressed</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>));
}

<span class='class'>Bs_Value</span> <span class='function'>rl_measure_text</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>2</span>);
    <span class='constant'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>);

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *text = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>object</span>;
    <span class='keyword'>const</span> <span class='class'>int</span> size = args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span>;

    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='function'>MeasureText</span>(text-&gt;<span class='field'>data</span>, size));
}

<span class='constant'>BS_LIBRARY_INIT</span> <span class='class'>void</span> <span class='function'>bs_library_init</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_C_Lib</span> *library) {
    <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='class'>Bs_FFI</span> ffi[] = {
        {<span class='string'>&quot;init_window&quot;</span>, rl_init_window},
        {<span class='string'>&quot;close_window&quot;</span>, rl_close_window},
        {<span class='string'>&quot;window_should_close&quot;</span>, rl_window_should_close},
        {<span class='string'>&quot;begin_drawing&quot;</span>, rl_begin_drawing},
        {<span class='string'>&quot;end_drawing&quot;</span>, rl_end_drawing},
        {<span class='string'>&quot;clear_background&quot;</span>, rl_clear_background},
        {<span class='string'>&quot;set_exit_key&quot;</span>, rl_set_exit_key},
        {<span class='string'>&quot;set_config_flags&quot;</span>, rl_set_config_flags},
        {<span class='string'>&quot;draw_line&quot;</span>, rl_draw_line},
        {<span class='string'>&quot;draw_text&quot;</span>, rl_draw_text},
        {<span class='string'>&quot;draw_rectangle&quot;</span>, rl_draw_rectangle},
        {<span class='string'>&quot;get_screen_width&quot;</span>, rl_get_screen_width},
        {<span class='string'>&quot;get_screen_height&quot;</span>, rl_get_screen_height},
        {<span class='string'>&quot;get_frame_time&quot;</span>, rl_get_frame_time},
        {<span class='string'>&quot;get_mouse_x&quot;</span>, rl_get_mouse_x},
        {<span class='string'>&quot;get_mouse_y&quot;</span>, rl_get_mouse_y},
        {<span class='string'>&quot;is_mouse_button_released&quot;</span>, rl_is_mouse_button_released},
        {<span class='string'>&quot;is_key_pressed&quot;</span>, rl_is_key_pressed},
        {<span class='string'>&quot;measure_text&quot;</span>, rl_measure_text},
    };
    <span class='function'>bs_c_lib_ffi</span>(bs, library, ffi, <span class='constant'>bs_c_array_size</span>(ffi));

    <span class='function'>bs_c_lib_set</span>(bs, library, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;MOUSE_BUTTON_LEFT&quot;</span>), <span class='constant'>bs_value_num</span>(MOUSE_BUTTON_LEFT));

    <span class='function'>bs_c_lib_set</span>(
        bs, library, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;FLAG_WINDOW_RESIZABLE&quot;</span>), <span class='constant'>bs_value_num</span>(FLAG_WINDOW_RESIZABLE));
}
</pre>
</div>
<p>
Compile the raylib module.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>cc -o raylib.so -fPIC -shared raylib.c -lbs -lraylib    <span class='comment'># On Linux</span>
<span class='string'>$ </span>cc -o raylib.dylib -fPIC -shared raylib.c -lbs -lraylib <span class='comment'># On macOS</span>
<span class='string'>$ </span>cl /LD /Fe:raylib.dll raylib.c bs.lib raylib.lib        <span class='comment'># On Windows</span>
</pre>
</div>
<p>
<blockquote>
Make sure to provide the compiler and linker flags as required.
</blockquote>
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// game_of_life_raylib.bs</span>

<span class='keyword'>var</span> rl = <span class='keyword'>import</span>(<span class='string'>&quot;raylib&quot;</span>)
<span class='keyword'>var</span> GameOfLife = <span class='keyword'>import</span>(<span class='string'>&quot;GameOfLife&quot;</span>)

<span class='keyword'>var</span> GRID = <span class='constant'>0x5A524CFF</span>
<span class='keyword'>var</span> BACKGROUND = <span class='constant'>0x282828FF</span>
<span class='keyword'>var</span> FOREGROUND = <span class='constant'>0x89B482FF</span>

<span class='keyword'>var</span> INTERVAL = <span class='constant'>0.1</span>
<span class='keyword'>var</span> FONT_SIZE = <span class='constant'>30</span>

<span class='keyword'>var</span> width = <span class='constant'>800</span>
<span class='keyword'>var</span> height = <span class='constant'>600</span>

<span class='keyword'>var</span> cell_size = <span class='constant'>0</span>
<span class='keyword'>var</span> padding_x = <span class='constant'>0</span>
<span class='keyword'>var</span> padding_y = <span class='constant'>0</span>

<span class='keyword'>class</span> <span class='class'>GameOfLifeRaylib</span> &lt; GameOfLife {
    <span class='function'>init</span>(width, height) {
        <span class='constant'>super</span>.<span class='function'>init</span>(width, height)
        <span class='constant'>this</span>.<span class='field'>clock</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>paused</span> = <span class='constant'>false</span>
    }

    <span class='function'>show</span>() {
        width = rl.<span class='function'>get_screen_width</span>()
        height = rl.<span class='function'>get_screen_height</span>() - FONT_SIZE * <span class='constant'>1.2</span>

        <span class='keyword'>var</span> cw = width / <span class='constant'>this</span>.<span class='field'>width</span>
        <span class='keyword'>var</span> ch = height / <span class='constant'>this</span>.<span class='field'>height</span>
        cell_size = cw.<span class='function'>min</span>(ch)

        padding_x = (width - <span class='constant'>this</span>.<span class='field'>width</span> * cell_size) / <span class='constant'>2</span>
        padding_y = (height - <span class='constant'>this</span>.<span class='field'>height</span> * cell_size) / <span class='constant'>2</span>

        rl.<span class='function'>draw_rectangle</span>(
            padding_x,
            padding_y,
            <span class='constant'>this</span>.<span class='field'>width</span> * cell_size,
            <span class='constant'>this</span>.<span class='field'>height</span> * cell_size,
            BACKGROUND)

        {
            <span class='keyword'>var</span> label = <span class='string'>&quot;Click to toggle cell, Space to play/pause&quot;</span>
            rl.<span class='function'>draw_text</span>(
                label,
                (width - rl.<span class='function'>measure_text</span>(label, FONT_SIZE)) / <span class='constant'>2</span>,
                <span class='constant'>this</span>.<span class='field'>height</span> * cell_size + FONT_SIZE * <span class='constant'>0.1</span>,
                FONT_SIZE,
                FOREGROUND)
        }

        <span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> + <span class='constant'>1</span> {
            <span class='keyword'>var</span> x = padding_x + i * cell_size
            rl.<span class='function'>draw_line</span>(x, <span class='constant'>0</span>, x, <span class='constant'>this</span>.<span class='field'>height</span> * cell_size, GRID)
        }

        <span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> + <span class='constant'>1</span> {
            <span class='keyword'>var</span> y = padding_y + i * cell_size
            rl.<span class='function'>draw_line</span>(padding_x, y, padding_x + <span class='constant'>this</span>.<span class='field'>width</span> * cell_size, y, GRID)
        }

        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='function'>get</span>(x, y) {
                    rl.<span class='function'>draw_rectangle</span>(
                        padding_x + x * cell_size,
                        padding_y + y * cell_size,
                        cell_size,
                        cell_size,
                        FOREGROUND)
                }
            }
        }
    }
}

rl.<span class='function'>init_window</span>(width, height, <span class='string'>&quot;Game Of Life&quot;</span>)
rl.<span class='function'>set_exit_key</span>(ascii.<span class='function'>code</span>(<span class='string'>&quot;Q&quot;</span>))
rl.<span class='function'>set_config_flags</span>(rl.<span class='field'>FLAG_WINDOW_RESIZABLE</span>)

<span class='keyword'>var</span> gol = <span class='function'>GameOfLifeRaylib</span>(<span class='constant'>20</span>, <span class='constant'>20</span>)
gol.<span class='function'>glider</span>(<span class='constant'>2</span>, <span class='constant'>2</span>)

<span class='keyword'>while</span> !rl.<span class='function'>window_should_close</span>() {
    rl.<span class='function'>begin_drawing</span>()
    rl.<span class='function'>clear_background</span>(<span class='constant'>0x181818FF</span>)

    gol.<span class='function'>show</span>()

    <span class='keyword'>if</span> !gol.<span class='field'>paused</span> {
        gol.<span class='field'>clock</span> += rl.<span class='function'>get_frame_time</span>()
        <span class='keyword'>if</span> gol.<span class='field'>clock</span> &gt;= INTERVAL {
            gol.<span class='field'>clock</span> = <span class='constant'>0</span>
            gol.<span class='function'>step</span>()
        }
    }

    <span class='keyword'>if</span> rl.<span class='function'>is_key_pressed</span>(ascii.<span class='function'>code</span>(<span class='string'>&quot; &quot;</span>)) {
        gol.<span class='field'>paused</span> = !gol.<span class='field'>paused</span>
    }

    <span class='keyword'>if</span> rl.<span class='function'>is_mouse_button_released</span>(rl.<span class='field'>MOUSE_BUTTON_LEFT</span>) {
        <span class='keyword'>var</span> x = ((rl.<span class='function'>get_mouse_x</span>() - padding_x) / cell_size).<span class='function'>floor</span>()
        <span class='keyword'>var</span> y = ((rl.<span class='function'>get_mouse_y</span>() - padding_y) / cell_size).<span class='function'>floor</span>()
        gol.<span class='function'>set</span>(x, y, !gol.<span class='function'>get</span>(x, y))
    }

    rl.<span class='function'>end_drawing</span>()
}

rl.<span class='function'>close_window</span>()
</pre>
</div>
<p>
Run the program.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs game_of_life_raylib.bs
</pre>
</div>
</section>
</section>
<section id='s8'>
<h2>CLI Task Management APP</h2>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// tasks.bs</span>

<span class='keyword'>var</span> TASKS_PATH = os.<span class='function'>getenv</span>(<span class='string'>&quot;HOME&quot;</span>) $ <span class='string'>&quot;/.tasks&quot;</span>

<span class='keyword'>class</span> <span class='class'>Tasks</span> {
    <span class='function'>init</span>(path) {
        <span class='constant'>this</span>.<span class='field'>path</span> = path
        <span class='constant'>this</span>.<span class='field'>tasks</span> = (io.<span class='function'>readfile</span>(<span class='constant'>this</span>.<span class='field'>path</span>) || <span class='string'>&quot;&quot;</span>).<span class='function'>split</span>(<span class='string'>&quot;</span><span class='escape'>\n</span><span class='string'>&quot;</span>)
    }

    <span class='function'>add</span>(title) {
        <span class='constant'>this</span>.<span class='field'>tasks</span>.<span class='function'>push</span>(title)
        <span class='constant'>this</span>.<span class='function'>save</span>()
        io.<span class='function'>println</span>(<span class='string'>&quot;Added: </span><span class='escape'>{</span>title<span class='escape'>}</span><span class='string'>&quot;</span>)
    }

    <span class='function'>verify</span>(index) {
        <span class='keyword'>var</span> total = <span class='keyword'>len</span>(<span class='constant'>this</span>.<span class='field'>tasks</span>)
        <span class='keyword'>if</span> index &gt;= total {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: invalid index </span><span class='escape'>{</span>index<span class='escape'>}</span><span class='string'> (total is </span><span class='escape'>{</span>total<span class='escape'>}</span><span class='string'>)&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }
    }

    <span class='function'>done</span>(index) {
        <span class='constant'>this</span>.<span class='function'>verify</span>(index)
        <span class='keyword'>var</span> title = <span class='keyword'>delete</span>(<span class='constant'>this</span>.<span class='field'>tasks</span>[index])
        <span class='constant'>this</span>.<span class='function'>save</span>()
        io.<span class='function'>println</span>(<span class='string'>&quot;Done </span><span class='escape'>{</span>index<span class='escape'>}</span><span class='string'>: </span><span class='escape'>{</span>title<span class='escape'>}</span><span class='string'>&quot;</span>)
    }

    <span class='function'>edit</span>(index, title) {
        <span class='constant'>this</span>.<span class='function'>verify</span>(index)
        <span class='constant'>this</span>.<span class='field'>tasks</span>[index] = title
        <span class='constant'>this</span>.<span class='function'>save</span>()
        io.<span class='function'>println</span>(<span class='string'>&quot;Edit </span><span class='escape'>{</span>index<span class='escape'>}</span><span class='string'>: </span><span class='escape'>{</span>title<span class='escape'>}</span><span class='string'>&quot;</span>)
    }

    <span class='function'>list</span>(query) {
        <span class='keyword'>for</span> i, t <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>tasks</span> {
            <span class='keyword'>if</span> query &amp;&amp; !t.<span class='function'>find</span>(query) {
                <span class='keyword'>continue</span>
            }

            io.<span class='function'>println</span>(<span class='string'>&quot;</span><span class='escape'>{</span>i<span class='escape'>}</span><span class='string'>: </span><span class='escape'>{</span>t<span class='escape'>}</span><span class='string'>&quot;</span>)
        }
    }

    <span class='function'>save</span>() {
        <span class='keyword'>var</span> f = io.<span class='function'>Writer</span>(<span class='constant'>this</span>.<span class='field'>path</span>)
        <span class='keyword'>if</span> !f {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: could not save tasks to &apos;</span><span class='escape'>{</span><span class='constant'>this</span>.<span class='field'>path</span><span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        f.<span class='function'>write</span>(<span class='constant'>this</span>.<span class='field'>tasks</span>.<span class='function'>join</span>(<span class='string'>&quot;</span><span class='escape'>\n</span><span class='string'>&quot;</span>))
        f.<span class='function'>close</span>()
    }
}

<span class='keyword'>fn</span> <span class='function'>usage</span>(f) {
    f.<span class='function'>writeln</span>(<span class='string'>&quot;Usage: tasks &lt;command&gt; [args...]&quot;</span>)
    f.<span class='function'>writeln</span>(<span class='string'>&quot;Commands:&quot;</span>)
    f.<span class='function'>writeln</span>(<span class='string'>&quot;    help                    Show this message and exit&quot;</span>)
    f.<span class='function'>writeln</span>(<span class='string'>&quot;    add  &lt;title&gt;            Add a task&quot;</span>)
    f.<span class='function'>writeln</span>(<span class='string'>&quot;    done &lt;index&gt;            Mark task as done&quot;</span>)
    f.<span class='function'>writeln</span>(<span class='string'>&quot;    edit &lt;index&gt; &lt;title&gt;    Edit a task&quot;</span>)
    f.<span class='function'>writeln</span>(<span class='string'>&quot;    list [query]            List tasks, with optional query&quot;</span>)
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>2</span> {
    io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: command not provided&quot;</span>)
    <span class='function'>usage</span>(io.<span class='field'>stderr</span>)
    os.<span class='function'>exit</span>(<span class='constant'>1</span>)
}

<span class='keyword'>var</span> command = os.<span class='field'>args</span>[<span class='constant'>1</span>]
<span class='keyword'>match</span> command {
    <span class='string'>&quot;help&quot;</span> -&gt; <span class='function'>usage</span>(io.<span class='field'>stdout</span>)

    <span class='string'>&quot;add&quot;</span> -&gt; {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>3</span> {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: task title not provided&quot;</span>)
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Usage: tasks add &lt;title&gt;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='function'>Tasks</span>(TASKS_PATH).<span class='function'>add</span>(os.<span class='field'>args</span>[<span class='constant'>2</span>])
    }

    <span class='string'>&quot;done&quot;</span> -&gt; {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>3</span> {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: task index not provided&quot;</span>)
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Usage: tasks done &lt;index&gt;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> index = os.<span class='field'>args</span>[<span class='constant'>2</span>].<span class='function'>tonumber</span>()
        <span class='keyword'>if</span> !index {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: invalid index &apos;</span><span class='escape'>{</span>os.<span class='field'>args</span>[<span class='constant'>2</span>]<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='function'>Tasks</span>(TASKS_PATH).<span class='function'>done</span>(index)
    }

    <span class='string'>&quot;edit&quot;</span> -&gt; {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>3</span> {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: task index not provided&quot;</span>)
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Usage: tasks edit &lt;index&gt; &lt;title&gt;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> index = os.<span class='field'>args</span>[<span class='constant'>2</span>].<span class='function'>tonumber</span>()
        <span class='keyword'>if</span> !index {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: invalid index &apos;</span><span class='escape'>{</span>os.<span class='field'>args</span>[<span class='constant'>2</span>]<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>4</span> {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: task title not provided&quot;</span>)
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Usage: tasks edit &lt;index&gt; &lt;title&gt;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='function'>Tasks</span>(TASKS_PATH).<span class='function'>edit</span>(index, os.<span class='field'>args</span>[<span class='constant'>3</span>])
    }

    <span class='string'>&quot;list&quot;</span> -&gt; {
        <span class='keyword'>var</span> query = <span class='constant'>nil</span>
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &gt; <span class='constant'>2</span> {
            query = <span class='function'>Regex</span>(os.<span class='field'>args</span>[<span class='constant'>2</span>])
            <span class='keyword'>if</span> !query {
                io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: invalid query &apos;</span><span class='escape'>{</span>os.<span class='field'>args</span>[<span class='constant'>2</span>]<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
                os.<span class='function'>exit</span>(<span class='constant'>1</span>)
            }
        }

        <span class='function'>Tasks</span>(TASKS_PATH).<span class='function'>list</span>(query)
    }
} <span class='keyword'>else</span> {
    io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: invalid command &apos;</span><span class='escape'>{</span>command<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
    <span class='function'>usage</span>(io.<span class='field'>stderr</span>)
    os.<span class='function'>exit</span>(<span class='constant'>1</span>)
}
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs tasks.bs add &quot;Finish reading book&quot;
Added: Finish reading book

<span class='string'>$ </span>bs tasks.bs add &quot;Submit project report&quot;
Added: Submit project report

<span class='string'>$ </span>bs tasks.bs add &quot;Submit homework&quot;
Added: Submit homework

<span class='string'>$ </span>bs tasks.bs list
[0] Finish reading book
[1] Submit project report
[2] Submit homework

<span class='string'>$ </span>bs tasks.bs list &apos;Submit.*report&apos;
[1] Submit project report

<span class='string'>$ </span>bs tasks.bs done 0
Done: Finish reading book

<span class='string'>$ </span>bs tasks.bs list
[0] Submit project report
[1] Submit homework
</pre>
</div>
</section>
<section id='s9'>
<h2>Flappy Bird</h2>
<p>
Flappy Bird using Raylib.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// raylib.c</span>

<span class='keyword'>#include</span> <span class='string'>&lt;bs/object.h&gt;</span>
<span class='keyword'>#include</span> <span class='string'>&lt;raylib.h&gt;</span>

<span class='class'>Bs_Value</span> <span class='function'>rl_init_window</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>3</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_OBJECT_STR</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> width = args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>int</span> height = args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *title = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>2</span>].<span class='field'>as</span>.<span class='field'>object</span>;

    <span class='function'>InitWindow</span>(width, height, title-&gt;<span class='field'>data</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_init_audio_device</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>InitAudioDevice</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_set_target_fps</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='function'>SetTargetFPS</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_close_window</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>CloseWindow</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_close_audio_device</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>CloseAudioDevice</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_window_should_close</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(<span class='function'>WindowShouldClose</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_begin_drawing</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>BeginDrawing</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_end_drawing</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>EndDrawing</span>();
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_clear_background</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='function'>ClearBackground</span>(<span class='function'>GetColor</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_draw_rectangle</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>);

    <span class='keyword'>const</span> <span class='class'>int</span> x = args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>int</span> y = args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>int</span> width = args[<span class='constant'>2</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>int</span> height = args[<span class='constant'>3</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>Color</span> color = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].<span class='field'>as</span>.<span class='field'>number</span>);

    <span class='function'>DrawRectangleLines</span>(x, y, width, height, color);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_is_key_pressed</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(<span class='function'>IsKeyPressed</span>(args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span>));
}

<span class='class'>Bs_Value</span> <span class='function'>rl_get_frame_time</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='function'>GetFrameTime</span>());
}

<span class='class'>Bs_Value</span> <span class='function'>rl_texture_init</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>);

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *path = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>object</span>;

    <span class='class'>Texture</span> texture = <span class='function'>LoadTexture</span>(path-&gt;<span class='field'>data</span>);
    <span class='keyword'>if</span> (!<span class='function'>IsTextureReady</span>(texture)) {
        <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
    }

    <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>) = texture;
    <span class='keyword'>return</span> args[-<span class='constant'>1</span>];
}

<span class='class'>Bs_Value</span> <span class='function'>rl_texture_draw</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>);
    <span class='constant'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>);

    <span class='keyword'>const</span> <span class='class'>float</span> scale = args[<span class='constant'>3</span>].<span class='field'>as</span>.<span class='field'>number</span>;

    <span class='keyword'>const</span> <span class='class'>Texture</span> texture = <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>);
    <span class='keyword'>const</span> <span class='class'>Rectangle</span> src = {<span class='constant'>0</span>, <span class='constant'>0</span>, texture.<span class='field'>width</span>, texture.<span class='field'>height</span>};
    <span class='keyword'>const</span> <span class='class'>Rectangle</span> dst = {
        args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>number</span> + (texture.<span class='field'>width</span> * scale) / <span class='constant'>2.0</span>,
        args[<span class='constant'>1</span>].<span class='field'>as</span>.<span class='field'>number</span> + (texture.<span class='field'>height</span> * scale) / <span class='constant'>2.0</span>,
        texture.<span class='field'>width</span> * scale,
        texture.<span class='field'>height</span> * scale,
    };

    <span class='keyword'>const</span> <span class='class'>Vector2</span> origin = {texture.<span class='field'>width</span> * scale / <span class='constant'>2.0</span>, texture.<span class='field'>height</span> * scale / <span class='constant'>2.0</span>};
    <span class='keyword'>const</span> <span class='class'>float</span> rotation = args[<span class='constant'>2</span>].<span class='field'>as</span>.<span class='field'>number</span>;
    <span class='keyword'>const</span> <span class='class'>Color</span> tint = <span class='function'>GetColor</span>(args[<span class='constant'>4</span>].<span class='field'>as</span>.<span class='field'>number</span>);

    <span class='function'>DrawTexturePro</span>(texture, src, dst, origin, rotation, tint);
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_texture_width</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>).<span class='field'>width</span>);
}

<span class='class'>Bs_Value</span> <span class='function'>rl_texture_height</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>).<span class='field'>height</span>);
}

<span class='class'>Bs_Value</span> <span class='function'>rl_texture_unload</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>UnloadTexture</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_sound_init</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>);

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *path = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>object</span>;

    <span class='class'>Sound</span> sound = <span class='function'>LoadSound</span>(path-&gt;<span class='field'>data</span>);
    <span class='keyword'>if</span> (!<span class='function'>IsSoundReady</span>(sound)) {
        <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
    }

    <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Sound</span>) = sound;
    <span class='keyword'>return</span> args[-<span class='constant'>1</span>];
}

<span class='class'>Bs_Value</span> <span class='function'>rl_sound_play</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>PlaySound</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Sound</span>));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_sound_unload</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>UnloadSound</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Sound</span>));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_music_init</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>);
    <span class='constant'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>);

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *path = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].<span class='field'>as</span>.<span class='field'>object</span>;

    <span class='class'>Music</span> music = <span class='function'>LoadMusicStream</span>(path-&gt;<span class='field'>data</span>);
    <span class='keyword'>if</span> (!<span class='function'>IsMusicReady</span>(music)) {
        <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
    }

    <span class='comment'>// An official binding would never do this, but do I care?</span>
    music.<span class='field'>looping</span> = <span class='constant'>true</span>;
    <span class='function'>PlayMusicStream</span>(music);
    <span class='function'>SetMusicVolume</span>(music, <span class='constant'>0.2</span>);

    <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>) = music;
    <span class='keyword'>return</span> args[-<span class='constant'>1</span>];
}

<span class='class'>Bs_Value</span> <span class='function'>rl_music_toggle</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='class'>Music</span> music = <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>);
    <span class='keyword'>if</span> (<span class='function'>IsMusicStreamPlaying</span>(music)) {
        <span class='function'>StopMusicStream</span>(music);
    } <span class='keyword'>else</span> {
        <span class='function'>PlayMusicStream</span>(music);
    }
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_music_update</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>UpdateMusicStream</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='class'>Bs_Value</span> <span class='function'>rl_music_unload</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='constant'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>);
    <span class='function'>UnloadMusicStream</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>));
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span>;
}

<span class='constant'>BS_LIBRARY_INIT</span> <span class='class'>void</span> <span class='function'>bs_library_init</span>(<span class='class'>Bs</span> *bs, <span class='class'>Bs_C_Lib</span> *library) {
    <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='class'>Bs_FFI</span> ffi[] = {
        {<span class='string'>&quot;init_window&quot;</span>, rl_init_window},
        {<span class='string'>&quot;init_audio_device&quot;</span>, rl_init_audio_device},
        {<span class='string'>&quot;set_target_fps&quot;</span>, rl_set_target_fps},
        {<span class='string'>&quot;close_window&quot;</span>, rl_close_window},
        {<span class='string'>&quot;close_audio_device&quot;</span>, rl_close_audio_device},
        {<span class='string'>&quot;window_should_close&quot;</span>, rl_window_should_close},
        {<span class='string'>&quot;begin_drawing&quot;</span>, rl_begin_drawing},
        {<span class='string'>&quot;end_drawing&quot;</span>, rl_end_drawing},
        {<span class='string'>&quot;clear_background&quot;</span>, rl_clear_background},
        {<span class='string'>&quot;draw_rectangle&quot;</span>, rl_draw_rectangle},
        {<span class='string'>&quot;is_key_pressed&quot;</span>, rl_is_key_pressed},
        {<span class='string'>&quot;get_frame_time&quot;</span>, rl_get_frame_time},
    };
    <span class='function'>bs_c_lib_ffi</span>(bs, library, ffi, <span class='constant'>bs_c_array_size</span>(ffi));

    <span class='class'>Bs_C_Class</span> *texture_class =
        <span class='function'>bs_c_class_new</span>(bs, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;Texture&quot;</span>), <span class='keyword'>sizeof</span>(<span class='class'>Texture</span>), rl_texture_init);

    texture_class-&gt;<span class='field'>can_fail</span> = <span class='constant'>true</span>;
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;draw&quot;</span>), rl_texture_draw);
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;width&quot;</span>), rl_texture_width);
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;height&quot;</span>), rl_texture_height);
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;unload&quot;</span>), rl_texture_unload);
    <span class='function'>bs_c_lib_set</span>(bs, library, texture_class-&gt;<span class='field'>name</span>, <span class='constant'>bs_value_object</span>(texture_class));

    <span class='class'>Bs_C_Class</span> *sound_class =
        <span class='function'>bs_c_class_new</span>(bs, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;Sound&quot;</span>), <span class='keyword'>sizeof</span>(<span class='class'>Sound</span>), rl_sound_init);

    sound_class-&gt;<span class='field'>can_fail</span> = <span class='constant'>true</span>;
    <span class='function'>bs_c_class_add</span>(bs, sound_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;play&quot;</span>), rl_sound_play);
    <span class='function'>bs_c_class_add</span>(bs, sound_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;unload&quot;</span>), rl_sound_unload);
    <span class='function'>bs_c_lib_set</span>(bs, library, sound_class-&gt;<span class='field'>name</span>, <span class='constant'>bs_value_object</span>(sound_class));

    <span class='class'>Bs_C_Class</span> *music_class =
        <span class='function'>bs_c_class_new</span>(bs, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;Music&quot;</span>), <span class='keyword'>sizeof</span>(<span class='class'>Music</span>), rl_music_init);

    music_class-&gt;<span class='field'>can_fail</span> = <span class='constant'>true</span>;
    <span class='function'>bs_c_class_add</span>(bs, music_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;toggle&quot;</span>), rl_music_toggle);
    <span class='function'>bs_c_class_add</span>(bs, music_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;update&quot;</span>), rl_music_update);
    <span class='function'>bs_c_class_add</span>(bs, music_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>&quot;unload&quot;</span>), rl_music_unload);
    <span class='function'>bs_c_lib_set</span>(bs, library, music_class-&gt;<span class='field'>name</span>, <span class='constant'>bs_value_object</span>(music_class));
}
</pre>
</div>
<p>
Compile the raylib module.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>cc -o raylib.so -fPIC -shared raylib.c -lbs -lraylib    <span class='comment'># On Linux</span>
<span class='string'>$ </span>cc -o raylib.dylib -fPIC -shared raylib.c -lbs -lraylib <span class='comment'># On macOS</span>
<span class='string'>$ </span>cl /LD /Fe:raylib.dll raylib.c bs.lib raylib.lib        <span class='comment'># On Windows</span>
</pre>
</div>
<p>
<blockquote>
Make sure to provide the compiler and linker flags as required.
</blockquote>
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// flappy_bird.bs</span>

<span class='keyword'>var</span> rl = <span class='keyword'>import</span>(<span class='string'>&quot;raylib&quot;</span>)
<span class='keyword'>var</span> game = {}

<span class='keyword'>var</span> WIDTH = <span class='constant'>800</span>
<span class='keyword'>var</span> HEIGHT = <span class='constant'>600</span>

<span class='keyword'>var</span> GRAVITY = <span class='constant'>0.5</span>
<span class='keyword'>var</span> IMPULSE = -<span class='constant'>7</span>

<span class='keyword'>var</span> BIRD_TILT = <span class='constant'>20</span>
<span class='keyword'>var</span> BIRD_STARTOFF_SPEED = <span class='constant'>7</span>
<span class='keyword'>var</span> BIRD_ANIMATION_SPEED = <span class='constant'>0.2</span>

<span class='keyword'>var</span> BIRD_MIN_X = <span class='constant'>100</span>
<span class='keyword'>var</span> BIRD_MIN_Y = <span class='constant'>50</span>

<span class='keyword'>var</span> PIPE_GAP = <span class='constant'>120</span>
<span class='keyword'>var</span> PIPE_SPEED = -<span class='constant'>4</span>
<span class='keyword'>var</span> PIPE_SPAWN_DELAY = <span class='constant'>1.5</span>
<span class='keyword'>var</span> PIPE_SPAWN_RANGE = HEIGHT / <span class='constant'>5</span>

<span class='keyword'>var</span> BACKGROUND_SCROLL_SPEED = <span class='constant'>0.5</span>

<span class='keyword'>var</span> MESSAGE_PADDING = <span class='constant'>30</span>
<span class='keyword'>var</span> OVER_MESSAGE_SCALE = <span class='constant'>1.2</span>
<span class='keyword'>var</span> TITLE_MESSAGE_SCALE = <span class='constant'>1.2</span>
<span class='keyword'>var</span> CONTINUE_MESSAGE_SCALE = <span class='constant'>0.7</span>

<span class='keyword'>var</span> BACKGROUND_MUSIC_DELAY = <span class='constant'>1.2</span>

<span class='keyword'>var</span> DEBUG_COLOR = <span class='constant'>0xFF0000FF</span>
<span class='keyword'>var</span> DEBUG_HITBOX = <span class='constant'>false</span>

<span class='keyword'>class</span> <span class='class'>Assets</span> {
    <span class='function'>init</span>() {
        <span class='constant'>this</span>.<span class='field'>sounds</span> = {}
        <span class='constant'>this</span>.<span class='field'>textures</span> = {}
    }

    <span class='function'>sound</span>(path, loader) {
        path = <span class='string'>&quot;assets/sounds/&quot;</span> $ path
        <span class='keyword'>if</span> path <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>sounds</span> {
            <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>sounds</span>[path]
        }

        <span class='keyword'>var</span> sound = <span class='function'>loader</span>(path)
        <span class='keyword'>if</span> !sound {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: could not load sound &apos;</span><span class='escape'>{</span>path<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='constant'>this</span>.<span class='field'>sounds</span>[path] = sound
        <span class='keyword'>return</span> sound
    }

    <span class='function'>texture</span>(path) {
        path = <span class='string'>&quot;assets/images/&quot;</span> $ path
        <span class='keyword'>if</span> path <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>textures</span> {
            <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>textures</span>[path]
        }

        <span class='keyword'>var</span> texture = rl.<span class='function'>Texture</span>(path)
        <span class='keyword'>if</span> !texture {
            io.<span class='function'>eprintln</span>(<span class='string'>&quot;Error: could not load image &apos;</span><span class='escape'>{</span>path<span class='escape'>}</span><span class='string'>&apos;&quot;</span>)
            os.<span class='function'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='constant'>this</span>.<span class='field'>textures</span>[path] = texture
        <span class='keyword'>return</span> texture
    }

    <span class='function'>unload</span>() {
        <span class='keyword'>for</span> _, sound <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>sounds</span> {
            sound.<span class='function'>unload</span>()
        }

        <span class='keyword'>for</span> _, texture <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>textures</span> {
            texture.<span class='function'>unload</span>()
        }
    }
}

<span class='keyword'>class</span> <span class='class'>Hitbox</span> {
    <span class='function'>init</span>(x, y, width, height) {
        <span class='constant'>this</span>.<span class='field'>x</span> = x
        <span class='constant'>this</span>.<span class='field'>y</span> = y
        <span class='constant'>this</span>.<span class='field'>width</span> = width
        <span class='constant'>this</span>.<span class='field'>height</span> = height
    }

    <span class='function'>move</span>(x, y) {
        <span class='constant'>this</span>.<span class='field'>x</span> = x
        <span class='constant'>this</span>.<span class='field'>y</span> = y
    }

    <span class='function'>debug</span>() {
        <span class='keyword'>if</span> DEBUG_HITBOX {
            rl.<span class='function'>draw_rectangle</span>(<span class='constant'>this</span>.<span class='field'>x</span>, <span class='constant'>this</span>.<span class='field'>y</span>, <span class='constant'>this</span>.<span class='field'>width</span>, <span class='constant'>this</span>.<span class='field'>height</span>, DEBUG_COLOR)
        }
    }

    <span class='function'>collides</span>(that) {
        <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>x</span> &lt; that.<span class='field'>x</span> + that.<span class='field'>width</span> &amp;&amp; <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> &gt; that.<span class='field'>x</span> &amp;&amp;
            <span class='constant'>this</span>.<span class='field'>y</span> &lt; that.<span class='field'>y</span> + that.<span class='field'>height</span> &amp;&amp; <span class='constant'>this</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>height</span> &gt; that.<span class='field'>y</span>
    }
}

<span class='keyword'>class</span> <span class='class'>Bird</span> {
    <span class='function'>init</span>() {
        <span class='constant'>this</span>.<span class='field'>dy</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>current</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>textures</span> = [
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;bird0.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;bird1.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;bird2.png&quot;</span>),
        ]

        <span class='keyword'>var</span> w = <span class='constant'>this</span>.<span class='field'>textures</span>[<span class='constant'>0</span>].<span class='function'>width</span>() * game.<span class='field'>scale</span>
        <span class='keyword'>var</span> h = <span class='constant'>this</span>.<span class='field'>textures</span>[<span class='constant'>0</span>].<span class='function'>height</span>() * game.<span class='field'>scale</span>
        <span class='constant'>this</span>.<span class='field'>hitbox</span> = <span class='function'>Hitbox</span>((WIDTH - w) / <span class='constant'>2</span>, HEIGHT / <span class='constant'>3</span>, w, h)
    }

    <span class='function'>update</span>() {
        <span class='keyword'>if</span> game.<span class='field'>started</span> {
            <span class='keyword'>if</span> !game.<span class='field'>over</span> &amp;&amp; <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> &gt; BIRD_MIN_X {
                <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> -= BIRD_STARTOFF_SPEED
                <span class='constant'>this</span>.<span class='field'>dy</span> -= <span class='constant'>0.3</span> * GRAVITY
            }

            <span class='keyword'>var</span> needs_dy = !game.<span class='field'>over</span> || <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> * game.<span class='field'>scale</span> &lt; game.<span class='field'>base</span>.<span class='field'>y</span>
            <span class='keyword'>if</span> needs_dy {
                <span class='constant'>this</span>.<span class='field'>dy</span> += GRAVITY
            }

            <span class='keyword'>if</span> !game.<span class='field'>over</span> &amp;&amp; rl.<span class='function'>is_key_pressed</span>(<span class='constant'>32</span>) {
                <span class='constant'>this</span>.<span class='field'>dy</span> = IMPULSE
            }

            <span class='keyword'>if</span> needs_dy {
                <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> += <span class='constant'>this</span>.<span class='field'>dy</span>
                <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> &lt; BIRD_MIN_Y {
                    <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> = BIRD_MIN_Y
                }
            }

            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> &gt;= game.<span class='field'>base</span>.<span class='field'>y</span> {
                game.<span class='function'>die</span>()
            }
        }

        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>current</span> += rl.<span class='function'>get_frame_time</span>()
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>current</span> &gt;= BIRD_ANIMATION_SPEED * <span class='keyword'>len</span>(<span class='constant'>this</span>.<span class='field'>textures</span>) {
                <span class='constant'>this</span>.<span class='field'>current</span> %= BIRD_ANIMATION_SPEED * <span class='keyword'>len</span>(<span class='constant'>this</span>.<span class='field'>textures</span>)
            }
        }

        <span class='constant'>this</span>.<span class='field'>textures</span>[(<span class='constant'>this</span>.<span class='field'>current</span> / BIRD_ANIMATION_SPEED).<span class='function'>floor</span>()].<span class='function'>draw</span>(
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span>,
            <span class='constant'>this</span>.<span class='field'>dy</span>.<span class='function'>sign</span>() * BIRD_TILT,
            game.<span class='field'>scale</span>,
            <span class='constant'>0xFFFFFFFF</span>)

        <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='function'>debug</span>()
    }
}

<span class='keyword'>class</span> <span class='class'>Background</span> {
    <span class='function'>init</span>() {
        <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>texture</span> = game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;background.png&quot;</span>)
        <span class='constant'>this</span>.<span class='field'>width</span> = <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>width</span>()
        game.<span class='field'>scale</span> = HEIGHT / <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>height</span>()
    }

    <span class='function'>update</span>() {
        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>x</span> -= BACKGROUND_SCROLL_SPEED
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>x</span> &lt; -<span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
            }
        }

        <span class='keyword'>var</span> i = <span class='constant'>0</span>
        <span class='keyword'>while</span> <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i &lt; WIDTH {
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>draw</span>(<span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i, <span class='constant'>0</span>, <span class='constant'>0</span>, game.<span class='field'>scale</span>, <span class='constant'>0xFFFFFFFF</span>)
            i += <span class='constant'>1</span>
        }
    }
}

<span class='keyword'>class</span> <span class='class'>Base</span> {
    <span class='function'>init</span>() {
        <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>texture</span> = game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;base.png&quot;</span>)
        <span class='constant'>this</span>.<span class='field'>width</span> = <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>width</span>()
        <span class='constant'>this</span>.<span class='field'>y</span> = HEIGHT - <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>height</span>() * game.<span class='field'>scale</span> * <span class='constant'>0.9</span>
    }

    <span class='function'>update</span>() {
        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>x</span> += PIPE_SPEED
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>x</span> &lt; -<span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
            }
        }

        <span class='keyword'>var</span> i = <span class='constant'>0</span>
        <span class='keyword'>while</span> <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i &lt; WIDTH {
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>draw</span>(
                <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i,
                <span class='constant'>this</span>.<span class='field'>y</span>,
                <span class='constant'>0</span>,
                game.<span class='field'>scale</span>,
                <span class='constant'>0xFFFFFFFF</span>)

            i += <span class='constant'>1</span>
        }
    }
}

<span class='keyword'>class</span> <span class='class'>Pipe</span> {
    <span class='function'>init</span>(y) {
        <span class='constant'>this</span>.<span class='field'>dx</span> = PIPE_SPEED
        <span class='constant'>this</span>.<span class='field'>texture</span> = game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;pipe.png&quot;</span>)
        <span class='constant'>this</span>.<span class='field'>hitbox</span> = <span class='function'>Hitbox</span>(
            WIDTH,
            y,
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>width</span>() * game.<span class='field'>scale</span>,
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>height</span>() * game.<span class='field'>scale</span>)

        <span class='constant'>this</span>.<span class='field'>scored</span> = <span class='constant'>false</span>
    }

    <span class='function'>top</span>() {
        <span class='keyword'>return</span> <span class='function'>Hitbox</span>(
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> - <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> / <span class='constant'>2</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>width</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span>)
    }

    <span class='function'>bottom</span>() {
        <span class='keyword'>return</span> <span class='function'>Hitbox</span>(
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> / <span class='constant'>2</span> + PIPE_GAP,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>width</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span>)
    }

    <span class='function'>update</span>() {
        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> += <span class='constant'>this</span>.<span class='field'>dx</span>
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>width</span> &lt; BIRD_MIN_X &amp;&amp; !<span class='constant'>this</span>.<span class='field'>scored</span> {
                game.<span class='function'>point</span>()
                <span class='constant'>this</span>.<span class='field'>scored</span> = <span class='constant'>true</span>
            }
        }

        <span class='keyword'>var</span> top = <span class='constant'>this</span>.<span class='function'>top</span>()
        <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>draw</span>(top.<span class='field'>x</span>, top.<span class='field'>y</span>, <span class='constant'>180</span>, game.<span class='field'>scale</span>, <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>var</span> bottom = <span class='constant'>this</span>.<span class='function'>bottom</span>()
        <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='function'>draw</span>(bottom.<span class='field'>x</span>, bottom.<span class='field'>y</span>, <span class='constant'>0</span>, game.<span class='field'>scale</span>, <span class='constant'>0xFFFFFFFF</span>)

        top.<span class='function'>debug</span>()
        bottom.<span class='function'>debug</span>()
    }
}

<span class='keyword'>class</span> <span class='class'>Pipes</span> {
    <span class='function'>init</span>() {
        <span class='constant'>this</span>.<span class='field'>items</span> = []
        <span class='constant'>this</span>.<span class='field'>clock</span> = <span class='constant'>0</span>
    }

    <span class='function'>update</span>() {
        <span class='keyword'>if</span> !game.<span class='field'>started</span> {
            <span class='keyword'>return</span> <span class='constant'>true</span>
        }

        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>clock</span> += rl.<span class='function'>get_frame_time</span>()
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>clock</span> &gt;= PIPE_SPAWN_DELAY {
                <span class='constant'>this</span>.<span class='field'>items</span>.<span class='function'>push</span>(<span class='function'>Pipe</span>(game.<span class='field'>rng</span>.<span class='function'>number</span>(-PIPE_SPAWN_RANGE, PIPE_SPAWN_RANGE)))
                <span class='constant'>this</span>.<span class='field'>clock</span> %= PIPE_SPAWN_DELAY
            }

            <span class='constant'>this</span>.<span class='field'>items</span> = <span class='constant'>this</span>.<span class='field'>items</span>.<span class='function'>filter</span>(<span class='keyword'>fn</span> (p) -&gt; p.<span class='field'>hitbox</span>.<span class='field'>x</span> &gt;= -p.<span class='field'>hitbox</span>.<span class='field'>width</span>)
        }

        <span class='keyword'>for</span> _, pipe <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>items</span> {
            pipe.<span class='function'>update</span>()
            <span class='keyword'>if</span> !game.<span class='field'>over</span> &amp;&amp;
                (pipe.<span class='function'>top</span>().<span class='function'>collides</span>(game.<span class='field'>bird</span>.<span class='field'>hitbox</span>) ||
                 pipe.<span class='function'>bottom</span>().<span class='function'>collides</span>(game.<span class='field'>bird</span>.<span class='field'>hitbox</span>)) {
                <span class='keyword'>return</span> <span class='constant'>false</span>
            }
        }

        <span class='keyword'>return</span> <span class='constant'>true</span>
    }
}

<span class='keyword'>class</span> <span class='class'>Score</span> {
    <span class='function'>init</span>() {
        <span class='constant'>this</span>.<span class='field'>best</span> = <span class='constant'>nil</span>
        <span class='constant'>this</span>.<span class='field'>current</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>textures</span> = [
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;0.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;1.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;2.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;3.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;4.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;5.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;6.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;7.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;8.png&quot;</span>),
            game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;9.png&quot;</span>),
        ]
    }

    <span class='function'>reset</span>() {
        <span class='constant'>this</span>.<span class='field'>current</span> = <span class='constant'>0</span>
    }

    <span class='function'>display</span>() {
        <span class='keyword'>if</span> game.<span class='field'>started</span> {
            <span class='keyword'>fn</span> <span class='function'>show</span>(n, y, scale, tint) {
                <span class='keyword'>var</span> digits = []
                <span class='keyword'>if</span> n &lt; <span class='constant'>10</span> {
                    digits.<span class='function'>push</span>(n)
                } <span class='keyword'>else</span> {
                    <span class='keyword'>while</span> n != <span class='constant'>0</span> {
                        digits.<span class='function'>push</span>(n % <span class='constant'>10</span>)
                        n = (n / <span class='constant'>10</span>).<span class='function'>floor</span>()
                    }
                }
                digits.<span class='function'>reverse</span>()

                scale *= game.<span class='field'>scale</span>
                <span class='keyword'>var</span> width = digits.<span class='function'>reduce</span>(<span class='keyword'>fn</span> (a, b) -&gt; a + <span class='constant'>this</span>.<span class='field'>textures</span>[b].<span class='function'>width</span>() * scale, <span class='constant'>0</span>)
                <span class='keyword'>var</span> x = (WIDTH - width) / <span class='constant'>2</span>
                <span class='keyword'>for</span> _, n <span class='keyword'>in</span> digits {
                    <span class='constant'>this</span>.<span class='field'>textures</span>[n].<span class='function'>draw</span>(x, y, <span class='constant'>0</span>, scale, tint)
                    x += <span class='constant'>this</span>.<span class='field'>textures</span>[n].<span class='function'>width</span>() * scale
                }
            }

            <span class='function'>show</span>(<span class='constant'>this</span>.<span class='field'>current</span>, HEIGHT / <span class='constant'>3.6</span>, <span class='constant'>1.0</span>, <span class='constant'>0xFFFFFFFF</span>)
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>best</span> {
                <span class='function'>show</span>(<span class='constant'>this</span>.<span class='field'>best</span>, HEIGHT / <span class='constant'>2.8</span>, <span class='constant'>0.7</span>, <span class='constant'>0xDDDDDDFF</span>)
            }
        }
    }
}

rl.<span class='function'>init_window</span>(WIDTH, HEIGHT, <span class='string'>&quot;Hello from BS!&quot;</span>)
rl.<span class='function'>init_audio_device</span>()
rl.<span class='function'>set_target_fps</span>(<span class='constant'>60</span>)

game.<span class='field'>assets</span> = <span class='function'>Assets</span>()
game.<span class='field'>started</span> = <span class='constant'>false</span>
game.<span class='field'>over</span> = <span class='constant'>false</span>
game.<span class='field'>rng</span> = math.<span class='function'>Random</span>()

game.<span class='field'>die</span> = <span class='keyword'>fn</span> () {
    <span class='keyword'>if</span> game.<span class='field'>over</span> {
        <span class='keyword'>return</span>
    }

    game.<span class='field'>over</span> = <span class='constant'>true</span>
    <span class='keyword'>if</span> !game.<span class='field'>score</span>.<span class='field'>best</span> || game.<span class='field'>score</span>.<span class='field'>current</span> &gt; game.<span class='field'>score</span>.<span class='field'>best</span> {
        game.<span class='field'>score</span>.<span class='field'>best</span> = game.<span class='field'>score</span>.<span class='field'>current</span>
    }

    game.<span class='field'>die_sound</span>.<span class='function'>play</span>()
    game.<span class='field'>background_music_delay</span> = BACKGROUND_MUSIC_DELAY
}

game.<span class='field'>point</span> = <span class='keyword'>fn</span> () {
    game.<span class='field'>score</span>.<span class='field'>current</span> += <span class='constant'>1</span>
    game.<span class='field'>point_sound</span>.<span class='function'>play</span>()
}

game.<span class='field'>start</span> = <span class='keyword'>fn</span> () {
    game.<span class='field'>start_sound</span>.<span class='function'>play</span>()
    game.<span class='field'>background_music</span>.<span class='function'>toggle</span>()
}

game.<span class='field'>background</span> = <span class='function'>Background</span>()
game.<span class='field'>base</span> = <span class='function'>Base</span>()
game.<span class='field'>bird</span> = <span class='function'>Bird</span>()
game.<span class='field'>pipes</span> = <span class='function'>Pipes</span>()
game.<span class='field'>score</span> = <span class='function'>Score</span>()

game.<span class='field'>over_message</span> = game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;gameover.png&quot;</span>)
game.<span class='field'>title_message</span> = game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;title.png&quot;</span>)
game.<span class='field'>continue_message</span> = game.<span class='field'>assets</span>.<span class='function'>texture</span>(<span class='string'>&quot;continue.png&quot;</span>)

game.<span class='field'>die_sound</span> = game.<span class='field'>assets</span>.<span class='function'>sound</span>(<span class='string'>&quot;die.wav&quot;</span>, rl.<span class='field'>Sound</span>)
game.<span class='field'>point_sound</span> = game.<span class='field'>assets</span>.<span class='function'>sound</span>(<span class='string'>&quot;point.wav&quot;</span>, rl.<span class='field'>Sound</span>)
game.<span class='field'>start_sound</span> = game.<span class='field'>assets</span>.<span class='function'>sound</span>(<span class='string'>&quot;start.wav&quot;</span>, rl.<span class='field'>Sound</span>)
game.<span class='field'>background_music</span> = game.<span class='field'>assets</span>.<span class='function'>sound</span>(<span class='string'>&quot;background.mp3&quot;</span>, rl.<span class='field'>Music</span>)

game.<span class='field'>background_music_delay</span> = <span class='constant'>0</span>

<span class='keyword'>while</span> !rl.<span class='function'>window_should_close</span>() {
    rl.<span class='function'>begin_drawing</span>()
    game.<span class='field'>background</span>.<span class='function'>update</span>()

    <span class='keyword'>if</span> game.<span class='field'>background_music_delay</span> &gt; <span class='constant'>0</span> {
        game.<span class='field'>background_music_delay</span> -= rl.<span class='function'>get_frame_time</span>()
        <span class='keyword'>if</span> game.<span class='field'>background_music_delay</span> &lt;= <span class='constant'>0</span> {
            game.<span class='field'>background_music</span>.<span class='function'>toggle</span>()
        }
    }

    game.<span class='field'>background_music</span>.<span class='function'>update</span>()

    <span class='keyword'>if</span> !game.<span class='field'>pipes</span>.<span class='function'>update</span>() {
        game.<span class='function'>die</span>()
    }

    game.<span class='field'>base</span>.<span class='function'>update</span>()
    game.<span class='field'>bird</span>.<span class='function'>update</span>()

    <span class='keyword'>if</span> !game.<span class='field'>started</span> {
        <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>title_message</span>.<span class='function'>width</span>() * TITLE_MESSAGE_SCALE) / <span class='constant'>2</span>
        game.<span class='field'>title_message</span>.<span class='function'>draw</span>(x, HEIGHT / <span class='constant'>7</span>, <span class='constant'>0</span>, TITLE_MESSAGE_SCALE, <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>continue_message</span>.<span class='function'>width</span>() * CONTINUE_MESSAGE_SCALE) / <span class='constant'>2</span>
        game.<span class='field'>continue_message</span>.<span class='function'>draw</span>(
            x,
            HEIGHT / <span class='constant'>3</span> + game.<span class='field'>continue_message</span>.<span class='function'>height</span>() * CONTINUE_MESSAGE_SCALE + MESSAGE_PADDING,
            <span class='constant'>0</span>,
            CONTINUE_MESSAGE_SCALE,
            <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>if</span> rl.<span class='function'>is_key_pressed</span>(<span class='constant'>32</span>) {
            game.<span class='field'>started</span> = <span class='constant'>true</span>
            game.<span class='field'>bird</span>.<span class='field'>dy</span> = IMPULSE
            game.<span class='function'>start</span>()
        }
    }

    <span class='keyword'>if</span> game.<span class='field'>over</span> {
        <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>over_message</span>.<span class='function'>width</span>() * OVER_MESSAGE_SCALE) / <span class='constant'>2</span>
        game.<span class='field'>over_message</span>.<span class='function'>draw</span>(x, HEIGHT / <span class='constant'>7</span>, <span class='constant'>0</span>, OVER_MESSAGE_SCALE, <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>if</span> game.<span class='field'>background_music_delay</span> &lt;= <span class='constant'>0</span> {
            <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>continue_message</span>.<span class='function'>width</span>() * CONTINUE_MESSAGE_SCALE) / <span class='constant'>2</span>
            game.<span class='field'>continue_message</span>.<span class='function'>draw</span>(
                x,
                HEIGHT / <span class='constant'>3</span> + game.<span class='field'>continue_message</span>.<span class='function'>height</span>() * CONTINUE_MESSAGE_SCALE + MESSAGE_PADDING,
                <span class='constant'>0</span>,
                CONTINUE_MESSAGE_SCALE,
                <span class='constant'>0xFFFFFFFF</span>)

            <span class='keyword'>if</span> rl.<span class='function'>is_key_pressed</span>(<span class='constant'>32</span>) {
                game.<span class='field'>over</span> = <span class='constant'>false</span>
                game.<span class='field'>score</span>.<span class='function'>reset</span>()

                game.<span class='field'>bird</span> = <span class='function'>Bird</span>()
                game.<span class='field'>pipes</span> = <span class='function'>Pipes</span>()

                game.<span class='field'>bird</span>.<span class='field'>dy</span> = IMPULSE
                game.<span class='function'>start</span>()
            }
        }
    }

    game.<span class='field'>score</span>.<span class='function'>display</span>()
    rl.<span class='function'>end_drawing</span>()
}

game.<span class='field'>assets</span>.<span class='function'>unload</span>()

rl.<span class='function'>close_audio_device</span>()
rl.<span class='function'>close_window</span>()
</pre>
</div>
<p>
Download and extract the
<a href="https://raw.githubusercontent.com/shoumodip/bs/refs/heads/main/examples/flappy_bird/assets.zip">assets</a>
</p>
<p>
Run the program.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs flappy_bird.bs
</pre>
</div>
<section id='s10'>
<h3>Asset Sources (Reference)</h3>
<p>
<ul>
<li><a href="https://github.com/samuelcust/flappy-bird-assets">Images and Sound Effects</a></li>
<li><a href="https://pixabay.com/music/video-games-retro-game-arcade-short-236130/">Background Music</a></li>
</ul>
</p>
</section>
</section>
</main>
<nav id='sidebar' class='collapsed'>
<ul>
<li>
<a href='#s0'><code>cat</code></a>
</li>
<li>
<a href='#s1'><code>ls</code></a>
</li>
<li>
<a href='#s2'><code>grep</code></a>
</li>
<li>
<a href='#s3'>Shell</a>
</li>
<li>
<a href='#s4'>Rule110</a>
</li>
<li>
<a href='#s5'>Game Of Life</a>
<ul>
<li>
<a href='#s6'>Console</a>
</li>
<li>
<a href='#s7'>Raylib</a>
</li>
</ul>
</li>
<li>
<a href='#s8'>CLI Task Management APP</a>
</li>
<li>
<a href='#s9'>Flappy Bird</a>
<ul>
<li>
<a href='#s10'>Asset Sources (Reference)</a>
</li>
</ul>
</li>
</ul>
</nav>
<script src='script.js'></script>
</body>
</html>
