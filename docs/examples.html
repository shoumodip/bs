<!doctype html>
<html>
<head>
<meta charset='UTF-8'>
<meta name='viewport' content='width=device-width, initial-scale=1.0'>
<link rel='stylesheet' href='style.css'>
</head>
<body>
<header id='header'>
<button id='toggle-sidebar' aria-label='Toggle Sidebar'>â˜°</button>
<h1>Examples</h1>
</header>
<main id='main'>
<a href='index.html' class='navigation-icon'>
<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='30px' height='30px' viewBox='0 0 30 30' version='1.1'><g id='surface1'><path fill='#D4BE98' d='M 29.625 13.960938 L 16.132812 2.09375 C 15.507812 1.542969 14.488281 1.542969 13.867188 2.09375 L 0.382812 13.960938 C -0.25 14.511719 -0.0820312 14.960938 0.757812 14.960938 L 4.917969 14.960938 L 4.917969 27.113281 C 4.917969 27.773438 5.464844 28.320312 6.132812 28.320312 L 11.222656 28.320312 L 11.222656 20.328125 C 11.222656 19.667969 11.769531 19.121094 12.433594 19.121094 L 17.574219 19.121094 C 18.246094 19.121094 18.789062 19.65625 18.789062 20.328125 L 18.789062 28.320312 L 23.878906 28.320312 C 24.550781 28.320312 25.089844 27.777344 25.089844 27.113281 L 25.089844 14.957031 L 29.253906 14.957031 C 30.078125 14.957031 30.246094 14.511719 29.625 13.960938 Z M 29.625 13.960938 '/></g></a>
<section id='s0'>
<h2> <code>cat</code></h2>
<p>
The UNIX <code>cat</code> coreutil.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># cat.bs</span>

<span class='keyword'>var</span> code = <span class='constant'>0</span>

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>1</span>, <span class='keyword'>len</span>(os.<span class='field'>args</span>) {
    <span class='keyword'>var</span> path = os.<span class='field'>args</span>[i]
    <span class='keyword'>var</span> contents = io.<span class='field'>readfile</span>(path)
    <span class='keyword'>if</span> !contents {
        io.<span class='field'>eprintln</span>(<span class='string'>"Error: could not read file '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>'"</span>)
        code = <span class='constant'>1</span>
        <span class='keyword'>continue</span>
    }

    io.<span class='field'>print</span>(contents)
}

os.<span class='field'>exit</span>(code)
</pre>
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs cat.bs cat.bs <span class='comment'># Poor man's quine</span>
var code = 0

for i in 1, len(os.args) {
    var path = os.args[i]
    var contents = io.readfile(path)
    if !contents {
        io.eprintln("Error: could not read file '\(path)'")
        code = 1
        continue
    }

    io.print(contents)
}

os.exit(code)
</pre>
</div>
</section>
<section id='s1'>
<h2> <code>ls</code></h2>
<p>
The UNIX <code>ls</code> coreutil.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># ls.bs</span>

<span class='keyword'>fn</span> <span class='function'>compare</span>(a, b) {
    <span class='keyword'>if</span> a.<span class='field'>suffix</span>(<span class='string'>"/"</span>) &amp;&amp; !b.<span class='field'>suffix</span>(<span class='string'>"/"</span>) {
        <span class='keyword'>return</span> <span class='constant'>true</span>
    }

    <span class='keyword'>if</span> !a.<span class='field'>suffix</span>(<span class='string'>"/"</span>) &amp;&amp; b.<span class='field'>suffix</span>(<span class='string'>"/"</span>) {
        <span class='keyword'>return</span> <span class='constant'>false</span>
    }

    <span class='keyword'>return</span> a.<span class='field'>compare</span>(b) &lt; <span class='constant'>0</span>
}

io.<span class='field'>readdir</span>(<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &gt;= <span class='constant'>2</span> <span class='keyword'>then</span> os.<span class='field'>args</span>[<span class='constant'>1</span>] <span class='keyword'>else</span> <span class='string'>"."</span>)
    .<span class='field'>map</span>(<span class='keyword'>fn</span> (e) =&gt; e.<span class='field'>name</span>() $ <span class='keyword'>if</span> e.<span class='field'>isdir</span>() <span class='keyword'>then</span> <span class='string'>"/"</span> <span class='keyword'>else</span> <span class='string'>""</span>)
    .<span class='field'>sort</span>(compare)
    .<span class='field'>map</span>(io.<span class='field'>println</span>)
</pre>
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs ls.bs
README.md
ls.bs
</pre>
</div>
</section>
<section id='s2'>
<h2> <code>grep</code></h2>
<p>
The UNIX <code>grep</code> coreutil.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># grep.bs</span>

<span class='keyword'>fn</span> <span class='function'>grep</span>(f, path, pattern) {
    <span class='keyword'>var</span> row = <span class='constant'>0</span>
    <span class='keyword'>while</span> !f.<span class='field'>eof</span>() {
        <span class='keyword'>var</span> line = f.<span class='field'>readln</span>()

        <span class='keyword'>var</span> col = line.<span class='field'>find</span>(pattern)
        <span class='keyword'>if</span> col {
            io.<span class='field'>println</span>(<span class='string'>"</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>:</span><span class='escape'>\</span><span class='escape'>(</span>row + <span class='constant'>1</span><span class='escape'>)</span><span class='string'>:</span><span class='escape'>\</span><span class='escape'>(</span>col + <span class='constant'>1</span><span class='escape'>)</span><span class='string'>: </span><span class='escape'>\</span><span class='escape'>(</span>line<span class='escape'>)</span><span class='string'>"</span>)
        }

        row += <span class='constant'>1</span>
    }
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>2</span> {
    io.<span class='field'>eprintln</span>(<span class='string'>"Usage: </span><span class='escape'>\</span><span class='escape'>(</span>os.<span class='field'>args</span>[<span class='constant'>0</span>]<span class='escape'>)</span><span class='string'> &lt;pattern&gt; [file...]"</span>)
    io.<span class='field'>eprintln</span>(<span class='string'>"Error: pattern not provided"</span>)
    os.<span class='field'>exit</span>(<span class='constant'>1</span>)
}

<span class='keyword'>var</span> pattern = Regex(os.<span class='field'>args</span>[<span class='constant'>1</span>])
<span class='keyword'>if</span> !pattern {
    io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid pattern"</span>)
    os.<span class='field'>exit</span>(<span class='constant'>1</span>)
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) == <span class='constant'>2</span> {
    <span class='keyword'>return</span> grep(io.<span class='field'>stdin</span>, <span class='string'>"&lt;stdin&gt;"</span>, pattern)
}

<span class='keyword'>var</span> code = <span class='constant'>0</span>

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>2</span>, <span class='keyword'>len</span>(os.<span class='field'>args</span>) {
    <span class='keyword'>var</span> path = os.<span class='field'>args</span>[i]

    <span class='keyword'>var</span> f = io.<span class='field'>Reader</span>(path)
    <span class='keyword'>if</span> !f {
        io.<span class='field'>println</span>(<span class='string'>"Error: could not open file '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>'"</span>)
        code = <span class='constant'>1</span>
        <span class='keyword'>continue</span>
    }

    grep(f, path, pattern)
    f.<span class='field'>close</span>()
}

os.<span class='field'>exit</span>(code)
</pre>
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs grep.bs '\.[A-z]+\(' grep.bs
grep.bs:3:13:     while !f.eof() {
grep.bs:4:21:         var line = f.readln()
grep.bs:6:23:         var col = line.find(pattern)
grep.bs:8:15:             io.println("\(path):\(row + 1):\(col + 1): \(line)")
grep.bs:14:6:     f.close()
grep.bs:18:7:     io.eprintln("Usage: \(os.args[0]) &lt;pattern&gt; [file...]")
grep.bs:19:7:     io.eprintln("Error: pattern not provided")
grep.bs:20:7:     os.exit(1)
grep.bs:25:7:     io.eprintln("Error: invalid pattern")
grep.bs:26:7:     os.exit(1)
grep.bs:38:15:     var f = io.Reader(path)
grep.bs:40:11:         io.println("Error: could not open file '\(path)'")
grep.bs:48:3: os.exit(code)

<span class='string'>$ </span>cat grep.bs | bs grep.bs '\.[A-z]+\(' <span class='comment'># DON'T CAT INTO GREP!!!</span>
&lt;stdin&gt;:3:13:     while !f.eof() {
&lt;stdin&gt;:4:21:         var line = f.readln()
&lt;stdin&gt;:6:23:         var col = line.find(pattern)
&lt;stdin&gt;:8:15:             io.println("\(path):\(row + 1):\(col + 1): \(line)")
&lt;stdin&gt;:16:7:     io.eprintln("Usage: \(os.args[0]) &lt;pattern&gt; [file...]")
&lt;stdin&gt;:17:7:     io.eprintln("Error: pattern not provided")
&lt;stdin&gt;:18:7:     os.exit(1)
&lt;stdin&gt;:23:7:     io.eprintln("Error: invalid pattern")
&lt;stdin&gt;:24:7:     os.exit(1)
&lt;stdin&gt;:36:15:     var f = io.Reader(path)
&lt;stdin&gt;:38:11:         io.println("Error: could not open file '\(path)'")
&lt;stdin&gt;:44:6:     f.close()
&lt;stdin&gt;:47:3: os.exit(code)
</pre>
</div>
</section>
<section id='s3'>
<h2> Shell</h2>
<p>
A simple UNIX shell.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># shell.bs</span>

<span class='keyword'>var</span> home = os.<span class='field'>getenv</span>(<span class='string'>"HOME"</span>)

<span class='comment'># Return a pretty current working directory</span>
<span class='keyword'>fn</span> <span class='function'>pwd</span>() {
    <span class='keyword'>var</span> cwd = os.<span class='field'>getcwd</span>()
    <span class='keyword'>if</span> cwd.<span class='field'>prefix</span>(home) {
        <span class='keyword'>return</span> <span class='string'>"~"</span> $ cwd.<span class='field'>slice</span>(<span class='keyword'>len</span>(home))
    }

    <span class='keyword'>return</span> cwd
}

<span class='comment'># Rawdogging shell lexing with regex any%</span>
<span class='keyword'>var</span> delim = Regex(<span class='string'>"[ </span><span class='escape'>\n</span><span class='string'></span><span class='escape'>\t</span><span class='string'>]+"</span>)

<span class='comment'># Previous working directory</span>
<span class='keyword'>var</span> previous = <span class='constant'>nil</span>

<span class='keyword'>while</span> !io.<span class='field'>stdin</span>.<span class='field'>eof</span>() {
    <span class='keyword'>var</span> args = io.<span class='field'>input</span>(<span class='string'>"</span><span class='escape'>\</span><span class='escape'>(</span>pwd()<span class='escape'>)</span><span class='string'> $ "</span>).<span class='field'>split</span>(delim)
    <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>0</span> {
        <span class='keyword'>continue</span>
    }

    <span class='keyword'>var</span> cmd = args[<span class='constant'>0</span>]

    <span class='comment'># Builtin 'exit'</span>
    <span class='comment'># Usage:</span>
    <span class='comment'>#   exit         -&gt; Exits with 0</span>
    <span class='comment'>#   exit &lt;CODE&gt;  -&gt; Exits with CODE</span>
    <span class='keyword'>if</span> cmd == <span class='string'>"exit"</span> {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(args) &gt; <span class='constant'>2</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: too many arguments to command '</span><span class='escape'>\</span><span class='escape'>(</span>cmd<span class='escape'>)</span><span class='string'>'"</span>)
            <span class='keyword'>continue</span>
        }

        <span class='keyword'>var</span> code = <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>2</span> <span class='keyword'>then</span> args[<span class='constant'>1</span>].<span class='field'>tonumber</span>() <span class='keyword'>else</span> <span class='constant'>0</span>
        <span class='keyword'>if</span> !code {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid exit code '</span><span class='escape'>\</span><span class='escape'>(</span>args[<span class='constant'>1</span>]<span class='escape'>)</span><span class='string'>'"</span>)
            <span class='keyword'>continue</span>
        }

        os.<span class='field'>exit</span>(code)
    }

    <span class='comment'># Builtin 'cd'</span>
    <span class='comment'># Usage:</span>
    <span class='comment'>#   cd        -&gt; Go to HOME</span>
    <span class='comment'>#   cd &lt;DIR&gt;  -&gt; Go to DIR</span>
    <span class='comment'>#   cd -      -&gt; Go to previous location</span>
    <span class='keyword'>if</span> cmd == <span class='string'>"cd"</span> {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(args) &gt; <span class='constant'>2</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: too many arguments to command '</span><span class='escape'>\</span><span class='escape'>(</span>cmd<span class='escape'>)</span><span class='string'>'"</span>)
            <span class='keyword'>continue</span>
        }

        <span class='keyword'>var</span> path = <span class='keyword'>if</span> <span class='keyword'>len</span>(args) == <span class='constant'>2</span> <span class='keyword'>then</span> args[<span class='constant'>1</span>] <span class='keyword'>else</span> <span class='string'>"~"</span>
        <span class='keyword'>if</span> path == <span class='string'>"-"</span> {
            <span class='keyword'>if</span> !previous {
                io.<span class='field'>eprintln</span>(<span class='string'>"Error: no previous directory to go into"</span>)
                <span class='keyword'>continue</span>
            }

            path = previous
        }

        <span class='keyword'>if</span> path.<span class='field'>prefix</span>(<span class='string'>"~"</span>) {
            path = home $ path.<span class='field'>slice</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> current = os.<span class='field'>getcwd</span>()
        <span class='keyword'>if</span> !os.<span class='field'>setcwd</span>(path) {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: the directory '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>' does not exist"</span>)
        }

        previous = current
        <span class='keyword'>continue</span>
    }

    <span class='keyword'>var</span> p = os.<span class='field'>Process</span>(args)
    <span class='keyword'>if</span> !p {
        io.<span class='field'>eprintln</span>(<span class='string'>"Error: unknown command '</span><span class='escape'>\</span><span class='escape'>(</span>cmd<span class='escape'>)</span><span class='string'>'"</span>)
        <span class='keyword'>continue</span>
    }
    p.<span class='field'>wait</span>()
}

<span class='comment'># In case of CTRL-d</span>
io.<span class='field'>println</span>()
</pre>
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs shell.bs
~/Git/bs/examples/shell $ ls -a
.  ..  README.md  shell.bs
</pre>
</div>
<p>
Use
<a href="https://github.com/hanslub42/rlwrap"><code>rlwrap</code></a>
in order to get readline bindings and filename autocompletion.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>rlwrap -c bs shell.bs <span class='comment'># Like so</span>
</pre>
</div>
</section>
<section id='s4'>
<h2> Rule110</h2>
<p>
An implementation of
<a href="https://en.wikipedia.org/wiki/Rule_110">Rule110</a>
for proof of Turing Completeness.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># rule110.bs</span>

<span class='keyword'>var</span> board = [].<span class='field'>resize</span>(<span class='constant'>30</span>).<span class='field'>fill</span>(<span class='constant'>0</span>)
board[<span class='keyword'>len</span>(board) - <span class='constant'>2</span>] = <span class='constant'>1</span>

<span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='keyword'>len</span>(board) - <span class='constant'>2</span> {
    <span class='keyword'>for</span> _, j <span class='keyword'>in</span> board {
        io.<span class='field'>print</span>(<span class='keyword'>if</span> j != <span class='constant'>0</span> <span class='keyword'>then</span> <span class='string'>"*"</span> <span class='keyword'>else</span> <span class='string'>" "</span>)
    }
    io.<span class='field'>println</span>()

    <span class='keyword'>var</span> pattern = (board[<span class='constant'>0</span>] &lt;&lt; <span class='constant'>1</span>) | board[<span class='constant'>1</span>]
    <span class='keyword'>for</span> j <span class='keyword'>in</span> <span class='constant'>1</span>, <span class='keyword'>len</span>(board) - <span class='constant'>1</span> {
        pattern = ((pattern &lt;&lt; <span class='constant'>1</span>) &amp; <span class='constant'>7</span>) | board[j + <span class='constant'>1</span>]
        board[j] = (<span class='constant'>110</span> &gt;&gt; pattern) &amp; <span class='constant'>1</span>
    }
}
</pre>
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs rule110.bs
                            *
                           **
                          ***
                         ** *
                        *****
                       **   *
                      ***  **
                     ** * ***
                    ******* *
                   **     ***
                  ***    ** *
                 ** *   *****
                *****  **   *
               **   * ***  **
              ***  **** * ***
             ** * **  ***** *
            ******** **   ***
           **      ****  ** *
          ***     **  * *****
         ** *    *** ****   *
        *****   ** ***  *  **
       **   *  ***** * ** ***
      ***  ** **   ******** *
     ** * ******  **      ***
    *******    * ***     ** *
   **     *   **** *    *****
  ***    **  **  ***   **   *
 ** *   *** *** ** *  ***  **
</pre>
</div>
</section>
<section id='s5'>
<h2> Game Of Life</h2>
<p>
An implementation of
<a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">Conway's Game Of Life</a>
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># GameOfLife.bs</span>

<span class='keyword'>class</span> <span class='class'>GameOfLife</span> {
    init(width, height) {
        <span class='constant'>this</span>.<span class='field'>width</span> = width
        <span class='constant'>this</span>.<span class='field'>height</span> = height

        <span class='constant'>this</span>.<span class='field'>board</span> = []
        <span class='constant'>this</span>.<span class='field'>buffer</span> = []

        <span class='constant'>this</span>.<span class='field'>board</span>.<span class='field'>resize</span>(width * height)
        <span class='constant'>this</span>.<span class='field'>buffer</span>.<span class='field'>resize</span>(width * height)
    }

    get(x, y) {
        x %= <span class='constant'>this</span>.<span class='field'>width</span>
        y %= <span class='constant'>this</span>.<span class='field'>height</span>
        <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>board</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x]
    }

    set(x, y, v) {
        x %= <span class='constant'>this</span>.<span class='field'>width</span>
        y %= <span class='constant'>this</span>.<span class='field'>height</span>
        <span class='constant'>this</span>.<span class='field'>board</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x] = v
    }

    step() {
        <span class='keyword'>fn</span> <span class='function'>set</span>(x, y, v) {
            x %= <span class='constant'>this</span>.<span class='field'>width</span>
            y %= <span class='constant'>this</span>.<span class='field'>height</span>
            <span class='constant'>this</span>.<span class='field'>buffer</span>[y * <span class='constant'>this</span>.<span class='field'>width</span> + x] = v
        }

        <span class='keyword'>fn</span> <span class='function'>nbors</span>(x, y) {
            <span class='keyword'>var</span> count = <span class='constant'>0</span>
            <span class='keyword'>for</span> dy <span class='keyword'>in</span> -<span class='constant'>1</span>, <span class='constant'>2</span> {
                <span class='keyword'>for</span> dx <span class='keyword'>in</span> -<span class='constant'>1</span>, <span class='constant'>2</span> {
                    <span class='keyword'>if</span> dx == <span class='constant'>0</span> &amp;&amp; dy == <span class='constant'>0</span> {
                        <span class='keyword'>continue</span>
                    }

                    <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>get</span>(x + dx, y + dy) {
                        count += <span class='constant'>1</span>
                    }
                }
            }
            <span class='keyword'>return</span> count
        }

        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='keyword'>var</span> n = nbors(x, y)
                <span class='keyword'>if</span> n == <span class='constant'>2</span> {
                    set(x, y, <span class='constant'>this</span>.<span class='field'>get</span>(x, y))
                } <span class='keyword'>else</span> {
                    set(x, y, n == <span class='constant'>3</span>)
                }
            }
        }

        <span class='comment'># Swap buffers</span>
        <span class='keyword'>var</span> t = <span class='constant'>this</span>.<span class='field'>board</span>
        <span class='constant'>this</span>.<span class='field'>board</span> = <span class='constant'>this</span>.<span class='field'>buffer</span>
        <span class='constant'>this</span>.<span class='field'>buffer</span> = t
    }

    <span class='comment'># (X, Y) is the center of the glider</span>
    glider(x, y) {
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>0</span>, y - <span class='constant'>1</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>1</span>, y + <span class='constant'>0</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='field'>set</span>(x - <span class='constant'>1</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>0</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>)
        <span class='constant'>this</span>.<span class='field'>set</span>(x + <span class='constant'>1</span>, y + <span class='constant'>1</span>, <span class='constant'>true</span>)
    }
}

<span class='keyword'>return</span> GameOfLife
</pre>
</pre>
</div>
<section id='s6'>
<h3> Console</h3>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># game_of_life_tui.bs</span>

<span class='keyword'>var</span> GameOfLife = <span class='keyword'>import</span>(<span class='string'>"GameOfLife"</span>)

<span class='keyword'>var</span> INTERVAL = <span class='constant'>0.1</span>

<span class='keyword'>class</span> <span class='class'>GameOfLifeTUI</span> &lt; <span class='class'>GameOfLife</span> {
    init(width, height) {
        <span class='constant'>super</span>.<span class='field'>init</span>(width, height)
    }

    show() {
        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                io.<span class='field'>print</span>(<span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>get</span>(x, y) <span class='keyword'>then</span> <span class='string'>"#"</span> <span class='keyword'>else</span> <span class='string'>"."</span>)
            }
            io.<span class='field'>println</span>()
        }
    }
}

<span class='keyword'>var</span> gol = GameOfLifeTUI(<span class='constant'>20</span>, <span class='constant'>10</span>)
gol.<span class='field'>glider</span>(<span class='constant'>1</span>, <span class='constant'>1</span>)

<span class='keyword'>while</span> <span class='constant'>true</span> {
    gol.<span class='field'>show</span>()
    gol.<span class='field'>step</span>()
    io.<span class='field'>print</span>(<span class='string'>"</span><span class='escape'>\e</span><span class='string'>[</span><span class='escape'>\</span><span class='escape'>(</span>gol.<span class='field'>height</span><span class='escape'>)</span><span class='string'>A</span><span class='escape'>\e</span><span class='string'>[</span><span class='escape'>\</span><span class='escape'>(</span>gol.<span class='field'>width</span><span class='escape'>)</span><span class='string'>D"</span>)
    os.<span class='field'>sleep</span>(INTERVAL)
}
</pre>
</pre>
</div>
<p>
Run the program.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs game_of_life_tui.bs
</pre>
</div>
</section>
<section id='s7'>
<h3> Raylib</h3>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// raylib.c
</span>
<span class='keyword'>#include</span> <span class='string'>&lt;math.h&gt;</span>

<span class='keyword'>#include</span> <span class='string'>"bs/object.h"</span>
<span class='keyword'>#include</span> <span class='string'>"raylib.h"</span>

<span class='class'>Bs_Value</span> rl_init_window(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>3</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_OBJECT_STR</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>int</span> width = args[<span class='constant'>0</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> height = args[<span class='constant'>1</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *title = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>2</span>].as.object<span class='comment'>;</span>

    <span class='comment'>// BS strings are null terminated by default for FFI convenience
</span>    InitWindow(width, height, title-&gt;data)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_close_window(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    CloseWindow()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_window_should_close(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(WindowShouldClose())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_begin_drawing(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    BeginDrawing()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_end_drawing(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    EndDrawing()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_clear_background(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    ClearBackground(GetColor(args[<span class='constant'>0</span>].as.number))<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_set_exit_key(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    SetExitKey(args[<span class='constant'>0</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_set_config_flags(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    SetConfigFlags(args[<span class='constant'>0</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_draw_line(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>4</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>int</span> startPosX = round(args[<span class='constant'>0</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> startPosY = round(args[<span class='constant'>1</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> endPosX = round(args[<span class='constant'>2</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> endPosY = round(args[<span class='constant'>3</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Color</span> color = GetColor(args[<span class='constant'>4</span>].as.number)<span class='comment'>;</span>

    DrawLine(startPosX, startPosY, endPosX, endPosY, color)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_draw_text(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>3</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *text = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].as.object<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> x = round(args[<span class='constant'>1</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> y = round(args[<span class='constant'>2</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> size = args[<span class='constant'>3</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Color</span> color = GetColor(args[<span class='constant'>4</span>].as.number)<span class='comment'>;</span>

    DrawText(text-&gt;data, x, y, size, color)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_draw_rectangle(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>int</span> posX = round(args[<span class='constant'>0</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> posY = round(args[<span class='constant'>1</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> width = round(args[<span class='constant'>2</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> height = round(args[<span class='constant'>3</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Color</span> color = GetColor(args[<span class='constant'>4</span>].as.number)<span class='comment'>;</span>

    DrawRectangle(posX, posY, width, height, color)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_get_screen_width(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(GetScreenWidth())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_get_screen_height(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(GetScreenHeight())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_get_frame_time(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(GetFrameTime())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_get_mouse_x(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(GetMouseX())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_get_mouse_y(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(GetMouseY())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_is_mouse_button_released(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(IsMouseButtonReleased(args[<span class='constant'>0</span>].as.number))<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_is_key_pressed(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(IsKeyPressed(args[<span class='constant'>0</span>].as.number))<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_measure_text(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>2</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *text = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].as.object<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> size = args[<span class='constant'>1</span>].as.number<span class='comment'>;</span>

    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(MeasureText(text-&gt;data, size))<span class='comment'>;</span>
}

<span class='constant'>BS_LIBRARY_INIT</span> <span class='class'>void</span> bs_library_init(<span class='class'>Bs</span> *bs, <span class='class'>Bs_C_Lib</span> *library) {
    <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='class'>Bs_FFI</span> ffi[] = {
        {<span class='string'>"init_window"</span>, rl_init_window},
        {<span class='string'>"close_window"</span>, rl_close_window},
        {<span class='string'>"window_should_close"</span>, rl_window_should_close},
        {<span class='string'>"begin_drawing"</span>, rl_begin_drawing},
        {<span class='string'>"end_drawing"</span>, rl_end_drawing},
        {<span class='string'>"clear_background"</span>, rl_clear_background},
        {<span class='string'>"set_exit_key"</span>, rl_set_exit_key},
        {<span class='string'>"set_config_flags"</span>, rl_set_config_flags},
        {<span class='string'>"draw_line"</span>, rl_draw_line},
        {<span class='string'>"draw_text"</span>, rl_draw_text},
        {<span class='string'>"draw_rectangle"</span>, rl_draw_rectangle},
        {<span class='string'>"get_screen_width"</span>, rl_get_screen_width},
        {<span class='string'>"get_screen_height"</span>, rl_get_screen_height},
        {<span class='string'>"get_frame_time"</span>, rl_get_frame_time},
        {<span class='string'>"get_mouse_x"</span>, rl_get_mouse_x},
        {<span class='string'>"get_mouse_y"</span>, rl_get_mouse_y},
        {<span class='string'>"is_mouse_button_released"</span>, rl_is_mouse_button_released},
        {<span class='string'>"is_key_pressed"</span>, rl_is_key_pressed},
        {<span class='string'>"measure_text"</span>, rl_measure_text},
    }<span class='comment'>;</span>
    <span class='function'>bs_c_lib_ffi</span>(bs, library, ffi, <span class='constant'>bs_c_array_size</span>(ffi))<span class='comment'>;</span>

    <span class='function'>bs_c_lib_set</span>(bs, library, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"MOUSE_BUTTON_LEFT"</span>), <span class='constant'>bs_value_num</span>(MOUSE_BUTTON_LEFT))<span class='comment'>;</span>

    <span class='function'>bs_c_lib_set</span>(
        bs, library, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"FLAG_WINDOW_RESIZABLE"</span>), <span class='constant'>bs_value_num</span>(FLAG_WINDOW_RESIZABLE))<span class='comment'>;</span>
}
</pre>
</div>
<p>
Compile the raylib module.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>cc -o raylib.so -fPIC -shared raylib.c -lbs -lraylib    <span class='comment'># On Linux</span>
<span class='string'>$ </span>cc -o raylib.dylib -fPIC -shared raylib.c -lbs -lraylib <span class='comment'># On macOS</span>
<span class='string'>$ </span>cl /LD /Fe:raylib.dll raylib.c bs.lib raylib.lib        <span class='comment'># On Windows</span>
</pre>
</div>
<blockquote>
<p>
Make sure to provide the compiler and linker flags as required.
</blockquote>
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># game_of_life_raylib.bs</span>

<span class='keyword'>var</span> rl = <span class='keyword'>import</span>(<span class='string'>"raylib"</span>)
<span class='keyword'>var</span> GameOfLife = <span class='keyword'>import</span>(<span class='string'>"GameOfLife"</span>)

<span class='keyword'>var</span> GRID = <span class='constant'>0x5A524CFF</span>
<span class='keyword'>var</span> BACKGROUND = <span class='constant'>0x282828FF</span>
<span class='keyword'>var</span> FOREGROUND = <span class='constant'>0x89B482FF</span>

<span class='keyword'>var</span> INTERVAL = <span class='constant'>0.1</span>
<span class='keyword'>var</span> FONT_SIZE = <span class='constant'>30</span>

<span class='keyword'>var</span> width = <span class='constant'>800</span>
<span class='keyword'>var</span> height = <span class='constant'>600</span>

<span class='keyword'>var</span> cell_size = <span class='constant'>0</span>
<span class='keyword'>var</span> padding_x = <span class='constant'>0</span>
<span class='keyword'>var</span> padding_y = <span class='constant'>0</span>

<span class='keyword'>class</span> <span class='class'>GameOfLifeRaylib</span> &lt; <span class='class'>GameOfLife</span> {
    init(width, height) {
        <span class='constant'>super</span>.<span class='field'>init</span>(width, height)
        <span class='constant'>this</span>.<span class='field'>clock</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>paused</span> = <span class='constant'>false</span>
    }

    show() {
        width = rl.<span class='field'>get_screen_width</span>()
        height = rl.<span class='field'>get_screen_height</span>() - FONT_SIZE * <span class='constant'>1.2</span>

        <span class='keyword'>var</span> cw = width / <span class='constant'>this</span>.<span class='field'>width</span>
        <span class='keyword'>var</span> ch = height / <span class='constant'>this</span>.<span class='field'>height</span>
        cell_size = cw.<span class='field'>min</span>(ch)

        padding_x = (width - <span class='constant'>this</span>.<span class='field'>width</span> * cell_size) / <span class='constant'>2</span>
        padding_y = (height - <span class='constant'>this</span>.<span class='field'>height</span> * cell_size) / <span class='constant'>2</span>

        rl.<span class='field'>draw_rectangle</span>(
            padding_x,
            padding_y,
            <span class='constant'>this</span>.<span class='field'>width</span> * cell_size,
            <span class='constant'>this</span>.<span class='field'>height</span> * cell_size,
            BACKGROUND)

        {
            <span class='keyword'>var</span> label = <span class='string'>"Click to toggle cell, Space to play/pause"</span>
            rl.<span class='field'>draw_text</span>(
                label,
                (width - rl.<span class='field'>measure_text</span>(label, FONT_SIZE)) / <span class='constant'>2</span>,
                <span class='constant'>this</span>.<span class='field'>height</span> * cell_size + FONT_SIZE * <span class='constant'>0.1</span>,
                FONT_SIZE,
                FOREGROUND)
        }

        <span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> + <span class='constant'>1</span> {
            <span class='keyword'>var</span> x = padding_x + i * cell_size
            rl.<span class='field'>draw_line</span>(x, <span class='constant'>0</span>, x, <span class='constant'>this</span>.<span class='field'>height</span> * cell_size, GRID)
        }

        <span class='keyword'>for</span> i <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> + <span class='constant'>1</span> {
            <span class='keyword'>var</span> y = padding_y + i * cell_size
            rl.<span class='field'>draw_line</span>(padding_x, y, padding_x + <span class='constant'>this</span>.<span class='field'>width</span> * cell_size, y, GRID)
        }

        <span class='keyword'>for</span> y <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>height</span> {
            <span class='keyword'>for</span> x <span class='keyword'>in</span> <span class='constant'>0</span>, <span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>get</span>(x, y) {
                    rl.<span class='field'>draw_rectangle</span>(
                        padding_x + x * cell_size,
                        padding_y + y * cell_size,
                        cell_size,
                        cell_size,
                        FOREGROUND)
                }
            }
        }
    }
}

rl.<span class='field'>init_window</span>(width, height, <span class='string'>"Game Of Life"</span>)
rl.<span class='field'>set_exit_key</span>(ascii.<span class='field'>code</span>(<span class='string'>"Q"</span>))
rl.<span class='field'>set_config_flags</span>(rl.<span class='field'>FLAG_WINDOW_RESIZABLE</span>)

<span class='keyword'>var</span> gol = GameOfLifeRaylib(<span class='constant'>20</span>, <span class='constant'>20</span>)
gol.<span class='field'>glider</span>(<span class='constant'>2</span>, <span class='constant'>2</span>)

<span class='keyword'>while</span> !rl.<span class='field'>window_should_close</span>() {
    rl.<span class='field'>begin_drawing</span>()
    rl.<span class='field'>clear_background</span>(<span class='constant'>0x181818FF</span>)

    gol.<span class='field'>show</span>()

    <span class='keyword'>if</span> !gol.<span class='field'>paused</span> {
        gol.<span class='field'>clock</span> += rl.<span class='field'>get_frame_time</span>()
        <span class='keyword'>if</span> gol.<span class='field'>clock</span> &gt;= INTERVAL {
            gol.<span class='field'>clock</span> = <span class='constant'>0</span>
            gol.<span class='field'>step</span>()
        }
    }

    <span class='keyword'>if</span> rl.<span class='field'>is_key_pressed</span>(ascii.<span class='field'>code</span>(<span class='string'>" "</span>)) {
        gol.<span class='field'>paused</span> = !gol.<span class='field'>paused</span>
    }

    <span class='keyword'>if</span> rl.<span class='field'>is_mouse_button_released</span>(rl.<span class='field'>MOUSE_BUTTON_LEFT</span>) {
        <span class='keyword'>var</span> x = ((rl.<span class='field'>get_mouse_x</span>() - padding_x) / cell_size).<span class='field'>floor</span>()
        <span class='keyword'>var</span> y = ((rl.<span class='field'>get_mouse_y</span>() - padding_y) / cell_size).<span class='field'>floor</span>()
        gol.<span class='field'>set</span>(x, y, !gol.<span class='field'>get</span>(x, y))
    }

    rl.<span class='field'>end_drawing</span>()
}

rl.<span class='field'>close_window</span>()
</pre>
</pre>
</div>
<p>
Run the program.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs game_of_life_raylib.bs
</pre>
</div>
</section>
</section>
<section id='s8'>
<h2> CLI Task Management APP</h2>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># tasks.bs</span>

<span class='keyword'>var</span> TASKS_PATH = os.<span class='field'>getenv</span>(<span class='string'>"HOME"</span>) $ <span class='string'>"/.tasks"</span>

<span class='keyword'>class</span> <span class='class'>Tasks</span> {
    init(path) {
        <span class='constant'>this</span>.<span class='field'>path</span> = path
        <span class='constant'>this</span>.<span class='field'>tasks</span> = (io.<span class='field'>readfile</span>(<span class='constant'>this</span>.<span class='field'>path</span>) || <span class='string'>""</span>).<span class='field'>split</span>(<span class='string'>"</span><span class='escape'>\n</span><span class='string'>"</span>)
    }

    add(title) {
        <span class='constant'>this</span>.<span class='field'>tasks</span>.<span class='field'>push</span>(title)
        io.<span class='field'>println</span>(<span class='string'>"Added: </span><span class='escape'>\</span><span class='escape'>(</span>title<span class='escape'>)</span><span class='string'>"</span>)
    }

    verify(index) {
        <span class='keyword'>var</span> total = <span class='keyword'>len</span>(<span class='constant'>this</span>.<span class='field'>tasks</span>)
        <span class='keyword'>if</span> index &gt;= total {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid index '</span><span class='escape'>\</span><span class='escape'>(</span>index<span class='escape'>)</span><span class='string'>'"</span>)

            <span class='keyword'>if</span> total == <span class='constant'>1</span> {
                io.<span class='field'>eprintln</span>(<span class='string'>"Note: there is currently 1 task"</span>)
            } <span class='keyword'>else</span> {
                io.<span class='field'>eprintln</span>(<span class='string'>"Note: there are currently </span><span class='escape'>\</span><span class='escape'>(</span>total<span class='escape'>)</span><span class='string'> tasks"</span>)
            }

            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }
    }

    done(index) {
        <span class='constant'>this</span>.<span class='field'>verify</span>(index)
        <span class='keyword'>var</span> title = <span class='constant'>this</span>.<span class='field'>tasks</span>.<span class='field'>remove</span>(index)
        io.<span class='field'>println</span>(<span class='string'>"Done #</span><span class='escape'>\</span><span class='escape'>(</span>index<span class='escape'>)</span><span class='string'>: </span><span class='escape'>\</span><span class='escape'>(</span>title<span class='escape'>)</span><span class='string'>"</span>)
    }

    edit(index, title) {
        <span class='constant'>this</span>.<span class='field'>verify</span>(index)
        <span class='constant'>this</span>.<span class='field'>tasks</span>[index] = title
        io.<span class='field'>println</span>(<span class='string'>"Edit #</span><span class='escape'>\</span><span class='escape'>(</span>index<span class='escape'>)</span><span class='string'>: </span><span class='escape'>\</span><span class='escape'>(</span>title<span class='escape'>)</span><span class='string'>"</span>)
    }

    list(query) {
        <span class='keyword'>for</span> i, t <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>tasks</span> {
            <span class='keyword'>if</span> query &amp;&amp; !t.<span class='field'>find</span>(query) {
                <span class='keyword'>continue</span>
            }

            io.<span class='field'>println</span>(<span class='string'>"[</span><span class='escape'>\</span><span class='escape'>(</span>i<span class='escape'>)</span><span class='string'>] </span><span class='escape'>\</span><span class='escape'>(</span>t<span class='escape'>)</span><span class='string'>"</span>)
        }
    }

    save() {
        <span class='keyword'>var</span> f = io.<span class='field'>Writer</span>(<span class='constant'>this</span>.<span class='field'>path</span>)
        <span class='keyword'>if</span> !f {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: could not save tasks to '</span><span class='escape'>\</span><span class='escape'>(</span><span class='constant'>this</span>.<span class='field'>path</span><span class='escape'>)</span><span class='string'>'"</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        f.<span class='field'>write</span>(<span class='constant'>this</span>.<span class='field'>tasks</span>.<span class='field'>join</span>(<span class='string'>"</span><span class='escape'>\n</span><span class='string'>"</span>))
        f.<span class='field'>close</span>()
    }
}

<span class='keyword'>fn</span> <span class='function'>usage</span>(f) {
    f.<span class='field'>writeln</span>(<span class='string'>"Usage: </span><span class='escape'>\</span><span class='escape'>(</span>os.<span class='field'>args</span>[<span class='constant'>0</span>]<span class='escape'>)</span><span class='string'> &lt;command&gt; [args...]"</span>)
    f.<span class='field'>writeln</span>(<span class='string'>"Commands:"</span>)
    f.<span class='field'>writeln</span>(<span class='string'>"    add  &lt;title&gt;            Add a task"</span>)
    f.<span class='field'>writeln</span>(<span class='string'>"    done &lt;index&gt;            Mark task as done"</span>)
    f.<span class='field'>writeln</span>(<span class='string'>"    edit &lt;index&gt; &lt;title&gt;    Edit a task"</span>)
    f.<span class='field'>writeln</span>(<span class='string'>"    list [query]            List tasks, with optional query"</span>)
}

<span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>2</span> {
    io.<span class='field'>eprintln</span>(<span class='string'>"Error: command not provided"</span>)
    usage(io.<span class='field'>stderr</span>)
    os.<span class='field'>exit</span>(<span class='constant'>1</span>)
}

<span class='keyword'>var</span> command = os.<span class='field'>args</span>[<span class='constant'>1</span>]
<span class='keyword'>match</span> command {
    <span class='string'>"add"</span> =&gt; {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>3</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: task title not provided"</span>)
            usage(io.<span class='field'>stderr</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> tasks = Tasks(TASKS_PATH)
        tasks.<span class='field'>add</span>(os.<span class='field'>args</span>[<span class='constant'>2</span>])
        tasks.<span class='field'>save</span>()
    }

    <span class='string'>"done"</span> =&gt; {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>3</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: task index not provided"</span>)
            usage(io.<span class='field'>stderr</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> index = os.<span class='field'>args</span>[<span class='constant'>2</span>].<span class='field'>tonumber</span>()
        <span class='keyword'>if</span> !index {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid index '</span><span class='escape'>\</span><span class='escape'>(</span>os.<span class='field'>args</span>[<span class='constant'>2</span>]<span class='escape'>)</span><span class='string'>'"</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> tasks = Tasks(TASKS_PATH)
        tasks.<span class='field'>done</span>(index)
        tasks.<span class='field'>save</span>()
    }

    <span class='string'>"edit"</span> =&gt; {
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>3</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: task index and title not provided"</span>)
            usage(io.<span class='field'>stderr</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> index = os.<span class='field'>args</span>[<span class='constant'>2</span>].<span class='field'>tonumber</span>()
        <span class='keyword'>if</span> !index {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid index '</span><span class='escape'>\</span><span class='escape'>(</span>os.<span class='field'>args</span>[<span class='constant'>2</span>]<span class='escape'>)</span><span class='string'>'"</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &lt; <span class='constant'>4</span> {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: task title not provided"</span>)
            usage(io.<span class='field'>stderr</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='keyword'>var</span> tasks = Tasks(TASKS_PATH)
        tasks.<span class='field'>edit</span>(index, os.<span class='field'>args</span>[<span class='constant'>3</span>])
        tasks.<span class='field'>save</span>()
    }

    <span class='string'>"list"</span> =&gt; {
        <span class='keyword'>var</span> query = <span class='constant'>nil</span>
        <span class='keyword'>if</span> <span class='keyword'>len</span>(os.<span class='field'>args</span>) &gt; <span class='constant'>2</span> {
            query = Regex(os.<span class='field'>args</span>[<span class='constant'>2</span>])
            <span class='keyword'>if</span> !query {
                io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid query '</span><span class='escape'>\</span><span class='escape'>(</span>os.<span class='field'>args</span>[<span class='constant'>2</span>]<span class='escape'>)</span><span class='string'>'"</span>)
                os.<span class='field'>exit</span>(<span class='constant'>1</span>)
            }
        }

        <span class='keyword'>var</span> tasks = Tasks(TASKS_PATH)
        tasks.<span class='field'>list</span>(query)
    }
} <span class='keyword'>else</span> {
    io.<span class='field'>eprintln</span>(<span class='string'>"Error: invalid command '</span><span class='escape'>\</span><span class='escape'>(</span>command<span class='escape'>)</span><span class='string'>'"</span>)
    usage(io.<span class='field'>stderr</span>)
    os.<span class='field'>exit</span>(<span class='constant'>1</span>)
}
</pre>
</pre>
</div>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs tasks.bs add "Finish reading book"
Added: Finish reading book

<span class='string'>$ </span>bs tasks.bs add "Submit project report"
Added: Submit project report

<span class='string'>$ </span>bs tasks.bs add "Submit homework"
Added: Submit homework

<span class='string'>$ </span>bs tasks.bs list
[0] Finish reading book
[1] Submit project report
[2] Submit homework

<span class='string'>$ </span>bs tasks.bs list 'Submit.*report'
[1] Submit project report

<span class='string'>$ </span>bs tasks.bs done 0
Done: Finish reading book

<span class='string'>$ </span>bs tasks.bs list
[0] Submit project report
[1] Submit homework
</pre>
</div>
</section>
<section id='s9'>
<h2> Flappy Bird</h2>
<p>
Flappy Bird using Raylib.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'>// raylib.c
</span>
<span class='keyword'>#include</span> <span class='string'>"raylib.h"</span>
<span class='keyword'>#include</span> <span class='string'>"bs/object.h"</span>

<span class='class'>Bs_Value</span> rl_init_window(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>3</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_OBJECT_STR</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>int</span> width = args[<span class='constant'>0</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> height = args[<span class='constant'>1</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *title = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>2</span>].as.object<span class='comment'>;</span>

    InitWindow(width, height, title-&gt;data)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_init_audio_device(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    InitAudioDevice()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_set_target_fps(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    SetTargetFPS(args[<span class='constant'>0</span>].as.number)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_close_window(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    CloseWindow()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_close_audio_device(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    CloseAudioDevice()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_window_should_close(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(WindowShouldClose())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_begin_drawing(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    BeginDrawing()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_end_drawing(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    EndDrawing()<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_clear_background(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    ClearBackground(GetColor(args[<span class='constant'>0</span>].as.number))<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_draw_rectangle(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>int</span> x = args[<span class='constant'>0</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> y = args[<span class='constant'>1</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> width = args[<span class='constant'>2</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>int</span> height = args[<span class='constant'>3</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Color</span> color = GetColor(args[<span class='constant'>4</span>].as.number)<span class='comment'>;</span>

    DrawRectangleLines(x, y, width, height, color)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_is_key_pressed(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_bool</span>(IsKeyPressed(args[<span class='constant'>0</span>].as.number))<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_get_frame_time(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(GetFrameTime())<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_texture_init(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *path = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].as.object<span class='comment'>;</span>

    <span class='class'>Texture</span> texture = LoadTexture(path-&gt;data)<span class='comment'>;</span>
    <span class='keyword'>if</span> (!IsTextureReady(texture)) {
        <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
    }

    <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>) = texture<span class='comment'>;</span>
    <span class='keyword'>return</span> args[-<span class='constant'>1</span>]<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_texture_draw(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>5</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>1</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>2</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_value_type</span>(bs, args, <span class='constant'>3</span>, <span class='constant'>BS_VALUE_NUM</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_whole_number</span>(bs, args, <span class='constant'>4</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>float</span> scale = args[<span class='constant'>3</span>].as.number<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>Texture</span> texture = <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>)<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Rectangle</span> src = {<span class='constant'>0</span>, <span class='constant'>0</span>, texture.width, texture.height}<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Rectangle</span> dst = {
        args[<span class='constant'>0</span>].as.number + (texture.width * scale) / <span class='constant'>2.0</span>,
        args[<span class='constant'>1</span>].as.number + (texture.height * scale) / <span class='constant'>2.0</span>,
        texture.width * scale,
        texture.height * scale,
    }<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>Vector2</span> origin = {texture.width * scale / <span class='constant'>2.0</span>, texture.height * scale / <span class='constant'>2.0</span>}<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>float</span> rotation = args[<span class='constant'>2</span>].as.number<span class='comment'>;</span>
    <span class='keyword'>const</span> <span class='class'>Color</span> tint = GetColor(args[<span class='constant'>4</span>].as.number)<span class='comment'>;</span>

    DrawTexturePro(texture, src, dst, origin, rotation, tint)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_texture_width(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>).width)<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_texture_height(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_num</span>(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>).height)<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_texture_unload(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    UnloadTexture(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Texture</span>))<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_sound_init(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *path = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].as.object<span class='comment'>;</span>

    <span class='class'>Sound</span> sound = LoadSound(path-&gt;data)<span class='comment'>;</span>
    <span class='keyword'>if</span> (!IsSoundReady(sound)) {
        <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
    }

    <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Sound</span>) = sound<span class='comment'>;</span>
    <span class='keyword'>return</span> args[-<span class='constant'>1</span>]<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_sound_play(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    PlaySound(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Sound</span>))<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_sound_unload(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    UnloadSound(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Sound</span>))<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_music_init(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>1</span>)<span class='comment'>;</span>
    <span class='function'>bs_arg_check_object_type</span>(bs, args, <span class='constant'>0</span>, <span class='constant'>BS_OBJECT_STR</span>)<span class='comment'>;</span>

    <span class='keyword'>const</span> <span class='class'>Bs_Str</span> *path = (<span class='keyword'>const</span> <span class='class'>Bs_Str</span> *)args[<span class='constant'>0</span>].as.object<span class='comment'>;</span>

    <span class='class'>Music</span> music = LoadMusicStream(path-&gt;data)<span class='comment'>;</span>
    <span class='keyword'>if</span> (!IsMusicReady(music)) {
        <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
    }

    <span class='comment'>// An official binding would never do this, but do I care?
</span>    music.looping = <span class='constant'>true</span><span class='comment'>;</span>
    PlayMusicStream(music)<span class='comment'>;</span>
    SetMusicVolume(music, <span class='constant'>0.2</span>)<span class='comment'>;</span>

    <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>) = music<span class='comment'>;</span>
    <span class='keyword'>return</span> args[-<span class='constant'>1</span>]<span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_music_toggle(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    <span class='class'>Music</span> music = <span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>)<span class='comment'>;</span>
    <span class='keyword'>if</span> (IsMusicStreamPlaying(music)) {
        StopMusicStream(music)<span class='comment'>;</span>
    } <span class='keyword'>else</span> {
        PlayMusicStream(music)<span class='comment'>;</span>
    }
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_music_update(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    UpdateMusicStream(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>))<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='class'>Bs_Value</span> rl_music_unload(<span class='class'>Bs</span> *bs, <span class='class'>Bs_Value</span> *args, <span class='class'>size_t</span> arity) {
    <span class='function'>bs_check_arity</span>(bs, arity, <span class='constant'>0</span>)<span class='comment'>;</span>
    UnloadMusicStream(<span class='constant'>bs_this_c_instance_data_as</span>(args, <span class='class'>Music</span>))<span class='comment'>;</span>
    <span class='keyword'>return</span> <span class='constant'>bs_value_nil</span><span class='comment'>;</span>
}

<span class='constant'>BS_LIBRARY_INIT</span> <span class='class'>void</span> bs_library_init(<span class='class'>Bs</span> *bs, <span class='class'>Bs_C_Lib</span> *library) {
    <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='class'>Bs_FFI</span> ffi[] = {
        {<span class='string'>"init_window"</span>, rl_init_window},
        {<span class='string'>"init_audio_device"</span>, rl_init_audio_device},
        {<span class='string'>"set_target_fps"</span>, rl_set_target_fps},
        {<span class='string'>"close_window"</span>, rl_close_window},
        {<span class='string'>"close_audio_device"</span>, rl_close_audio_device},
        {<span class='string'>"window_should_close"</span>, rl_window_should_close},
        {<span class='string'>"begin_drawing"</span>, rl_begin_drawing},
        {<span class='string'>"end_drawing"</span>, rl_end_drawing},
        {<span class='string'>"clear_background"</span>, rl_clear_background},
        {<span class='string'>"draw_rectangle"</span>, rl_draw_rectangle},
        {<span class='string'>"is_key_pressed"</span>, rl_is_key_pressed},
        {<span class='string'>"get_frame_time"</span>, rl_get_frame_time},
    }<span class='comment'>;</span>
    <span class='function'>bs_c_lib_ffi</span>(bs, library, ffi, <span class='constant'>bs_c_array_size</span>(ffi))<span class='comment'>;</span>

    <span class='class'>Bs_C_Class</span> *texture_class =
        <span class='function'>bs_c_class_new</span>(bs, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"Texture"</span>), <span class='keyword'>sizeof</span>(<span class='class'>Texture</span>), rl_texture_init)<span class='comment'>;</span>

    texture_class-&gt;can_fail = <span class='constant'>true</span><span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"draw"</span>), rl_texture_draw)<span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"width"</span>), rl_texture_width)<span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"height"</span>), rl_texture_height)<span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, texture_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"unload"</span>), rl_texture_unload)<span class='comment'>;</span>
    <span class='function'>bs_c_lib_set</span>(bs, library, texture_class-&gt;name, <span class='constant'>bs_value_object</span>(texture_class))<span class='comment'>;</span>

    <span class='class'>Bs_C_Class</span> *sound_class =
        <span class='function'>bs_c_class_new</span>(bs, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"Sound"</span>), <span class='keyword'>sizeof</span>(<span class='class'>Sound</span>), rl_sound_init)<span class='comment'>;</span>

    sound_class-&gt;can_fail = <span class='constant'>true</span><span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, sound_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"play"</span>), rl_sound_play)<span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, sound_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"unload"</span>), rl_sound_unload)<span class='comment'>;</span>
    <span class='function'>bs_c_lib_set</span>(bs, library, sound_class-&gt;name, <span class='constant'>bs_value_object</span>(sound_class))<span class='comment'>;</span>

    <span class='class'>Bs_C_Class</span> *music_class =
        <span class='function'>bs_c_class_new</span>(bs, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"Music"</span>), <span class='keyword'>sizeof</span>(<span class='class'>Music</span>), rl_music_init)<span class='comment'>;</span>

    music_class-&gt;can_fail = <span class='constant'>true</span><span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, music_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"toggle"</span>), rl_music_toggle)<span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, music_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"update"</span>), rl_music_update)<span class='comment'>;</span>
    <span class='function'>bs_c_class_add</span>(bs, music_class, <span class='constant'>Bs_Sv_Static</span>(<span class='string'>"unload"</span>), rl_music_unload)<span class='comment'>;</span>
    <span class='function'>bs_c_lib_set</span>(bs, library, music_class-&gt;name, <span class='constant'>bs_value_object</span>(music_class))<span class='comment'>;</span>
}
</pre>
</div>
<p>
Compile the raylib module.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>cc -o raylib.so -fPIC -shared raylib.c -lbs -lraylib    <span class='comment'># On Linux</span>
<span class='string'>$ </span>cc -o raylib.dylib -fPIC -shared raylib.c -lbs -lraylib <span class='comment'># On macOS</span>
<span class='string'>$ </span>cl /LD /Fe:raylib.dll raylib.c bs.lib raylib.lib        <span class='comment'># On Windows</span>
</pre>
</div>
<blockquote>
<p>
Make sure to provide the compiler and linker flags as required.
</blockquote>
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='comment'># flappy_bird.bs</span>

<span class='keyword'>var</span> rl = <span class='keyword'>import</span>(<span class='string'>"raylib"</span>)
<span class='keyword'>var</span> game = {}

<span class='keyword'>var</span> WIDTH = <span class='constant'>800</span>
<span class='keyword'>var</span> HEIGHT = <span class='constant'>600</span>

<span class='keyword'>var</span> GRAVITY = <span class='constant'>0.5</span>
<span class='keyword'>var</span> IMPULSE = -<span class='constant'>7</span>

<span class='keyword'>var</span> BIRD_TILT = <span class='constant'>20</span>
<span class='keyword'>var</span> BIRD_STARTOFF_SPEED = <span class='constant'>7</span>
<span class='keyword'>var</span> BIRD_ANIMATION_SPEED = <span class='constant'>0.2</span>

<span class='keyword'>var</span> BIRD_MIN_X = <span class='constant'>100</span>
<span class='keyword'>var</span> BIRD_MIN_Y = <span class='constant'>50</span>

<span class='keyword'>var</span> PIPE_GAP = <span class='constant'>120</span>
<span class='keyword'>var</span> PIPE_SPEED = -<span class='constant'>4</span>
<span class='keyword'>var</span> PIPE_SPAWN_DELAY = <span class='constant'>1.5</span>
<span class='keyword'>var</span> PIPE_SPAWN_RANGE = HEIGHT / <span class='constant'>5</span>

<span class='keyword'>var</span> BACKGROUND_SCROLL_SPEED = <span class='constant'>0.5</span>

<span class='keyword'>var</span> MESSAGE_PADDING = <span class='constant'>30</span>
<span class='keyword'>var</span> OVER_MESSAGE_SCALE = <span class='constant'>1.2</span>
<span class='keyword'>var</span> TITLE_MESSAGE_SCALE = <span class='constant'>1.2</span>
<span class='keyword'>var</span> CONTINUE_MESSAGE_SCALE = <span class='constant'>0.7</span>

<span class='keyword'>var</span> BACKGROUND_MUSIC_DELAY = <span class='constant'>1.2</span>

<span class='keyword'>var</span> DEBUG_COLOR = <span class='constant'>0xFF0000FF</span>
<span class='keyword'>var</span> DEBUG_HITBOX = <span class='constant'>false</span>

<span class='keyword'>class</span> <span class='class'>Assets</span> {
    init() {
        <span class='constant'>this</span>.<span class='field'>sounds</span> = {}
        <span class='constant'>this</span>.<span class='field'>textures</span> = {}
    }

    sound(path, loader) {
        path = <span class='string'>"assets/sounds/"</span> $ path
        <span class='keyword'>if</span> path <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>sounds</span> {
            <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>sounds</span>[path]
        }

        <span class='keyword'>var</span> sound = loader(path)
        <span class='keyword'>if</span> !sound {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: could not load sound '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>'"</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='constant'>this</span>.<span class='field'>sounds</span>[path] = sound
        <span class='keyword'>return</span> sound
    }

    texture(path) {
        path = <span class='string'>"assets/images/"</span> $ path
        <span class='keyword'>if</span> path <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>textures</span> {
            <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>textures</span>[path]
        }

        <span class='keyword'>var</span> texture = rl.<span class='field'>Texture</span>(path)
        <span class='keyword'>if</span> !texture {
            io.<span class='field'>eprintln</span>(<span class='string'>"Error: could not load image '</span><span class='escape'>\</span><span class='escape'>(</span>path<span class='escape'>)</span><span class='string'>'"</span>)
            os.<span class='field'>exit</span>(<span class='constant'>1</span>)
        }

        <span class='constant'>this</span>.<span class='field'>textures</span>[path] = texture
        <span class='keyword'>return</span> texture
    }

    unload() {
        <span class='keyword'>for</span> _, sound <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>sounds</span> {
            sound.<span class='field'>unload</span>()
        }

        <span class='keyword'>for</span> _, texture <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>textures</span> {
            texture.<span class='field'>unload</span>()
        }
    }
}

<span class='keyword'>class</span> <span class='class'>Hitbox</span> {
    init(x, y, width, height) {
        <span class='constant'>this</span>.<span class='field'>x</span> = x
        <span class='constant'>this</span>.<span class='field'>y</span> = y
        <span class='constant'>this</span>.<span class='field'>width</span> = width
        <span class='constant'>this</span>.<span class='field'>height</span> = height
    }

    move(x, y) {
        <span class='constant'>this</span>.<span class='field'>x</span> = x
        <span class='constant'>this</span>.<span class='field'>y</span> = y
    }

    debug() {
        <span class='keyword'>if</span> DEBUG_HITBOX {
            rl.<span class='field'>draw_rectangle</span>(<span class='constant'>this</span>.<span class='field'>x</span>, <span class='constant'>this</span>.<span class='field'>y</span>, <span class='constant'>this</span>.<span class='field'>width</span>, <span class='constant'>this</span>.<span class='field'>height</span>, DEBUG_COLOR)
        }
    }

    collides(that) {
        <span class='keyword'>return</span> <span class='constant'>this</span>.<span class='field'>x</span> &lt; that.<span class='field'>x</span> + that.<span class='field'>width</span> &amp;&amp; <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> &gt; that.<span class='field'>x</span> &amp;&amp;
            <span class='constant'>this</span>.<span class='field'>y</span> &lt; that.<span class='field'>y</span> + that.<span class='field'>height</span> &amp;&amp; <span class='constant'>this</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>height</span> &gt; that.<span class='field'>y</span>
    }
}

<span class='keyword'>class</span> <span class='class'>Bird</span> {
    init() {
        <span class='constant'>this</span>.<span class='field'>dy</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>current</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>textures</span> = [
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"bird0.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"bird1.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"bird2.png"</span>),
        ]

        <span class='keyword'>var</span> w = <span class='constant'>this</span>.<span class='field'>textures</span>[<span class='constant'>0</span>].<span class='field'>width</span>() * game.<span class='field'>scale</span>
        <span class='keyword'>var</span> h = <span class='constant'>this</span>.<span class='field'>textures</span>[<span class='constant'>0</span>].<span class='field'>height</span>() * game.<span class='field'>scale</span>
        <span class='constant'>this</span>.<span class='field'>hitbox</span> = Hitbox((WIDTH - w) / <span class='constant'>2</span>, HEIGHT / <span class='constant'>3</span>, w, h)
    }

    update() {
        <span class='keyword'>if</span> game.<span class='field'>started</span> {
            <span class='keyword'>if</span> !game.<span class='field'>over</span> &amp;&amp; <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> &gt; BIRD_MIN_X {
                <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> -= BIRD_STARTOFF_SPEED
                <span class='constant'>this</span>.<span class='field'>dy</span> -= <span class='constant'>0.3</span> * GRAVITY
            }

            <span class='keyword'>var</span> needs_dy = !game.<span class='field'>over</span> || <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> * game.<span class='field'>scale</span> &lt; game.<span class='field'>base</span>.<span class='field'>y</span>
            <span class='keyword'>if</span> needs_dy {
                <span class='constant'>this</span>.<span class='field'>dy</span> += GRAVITY
            }

            <span class='keyword'>if</span> !game.<span class='field'>over</span> &amp;&amp; rl.<span class='field'>is_key_pressed</span>(<span class='constant'>32</span>) {
                <span class='constant'>this</span>.<span class='field'>dy</span> = IMPULSE
            }

            <span class='keyword'>if</span> needs_dy {
                <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> += <span class='constant'>this</span>.<span class='field'>dy</span>
                <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> &lt; BIRD_MIN_Y {
                    <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> = BIRD_MIN_Y
                }
            }

            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> &gt;= game.<span class='field'>base</span>.<span class='field'>y</span> {
                game.<span class='field'>die</span>()
            }
        }

        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>current</span> += rl.<span class='field'>get_frame_time</span>()
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>current</span> &gt;= BIRD_ANIMATION_SPEED * <span class='keyword'>len</span>(<span class='constant'>this</span>.<span class='field'>textures</span>) {
                <span class='constant'>this</span>.<span class='field'>current</span> %= BIRD_ANIMATION_SPEED * <span class='keyword'>len</span>(<span class='constant'>this</span>.<span class='field'>textures</span>)
            }
        }

        <span class='constant'>this</span>.<span class='field'>textures</span>[(<span class='constant'>this</span>.<span class='field'>current</span> / BIRD_ANIMATION_SPEED).<span class='field'>floor</span>()].<span class='field'>draw</span>(
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span>,
            <span class='constant'>this</span>.<span class='field'>dy</span>.<span class='field'>sign</span>() * BIRD_TILT,
            game.<span class='field'>scale</span>,
            <span class='constant'>0xFFFFFFFF</span>)

        <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>debug</span>()
    }
}

<span class='keyword'>class</span> <span class='class'>Background</span> {
    init() {
        <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>texture</span> = game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"background.png"</span>)
        <span class='constant'>this</span>.<span class='field'>width</span> = <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>width</span>()
        game.<span class='field'>scale</span> = HEIGHT / <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>height</span>()
    }

    update() {
        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>x</span> -= BACKGROUND_SCROLL_SPEED
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>x</span> &lt; -<span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
            }
        }

        <span class='keyword'>var</span> i = <span class='constant'>0</span>
        <span class='keyword'>while</span> <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i &lt; WIDTH {
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>draw</span>(<span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i, <span class='constant'>0</span>, <span class='constant'>0</span>, game.<span class='field'>scale</span>, <span class='constant'>0xFFFFFFFF</span>)
            i += <span class='constant'>1</span>
        }
    }
}

<span class='keyword'>class</span> <span class='class'>Base</span> {
    init() {
        <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>texture</span> = game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"base.png"</span>)
        <span class='constant'>this</span>.<span class='field'>width</span> = <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>width</span>()
        <span class='constant'>this</span>.<span class='field'>y</span> = HEIGHT - <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>height</span>() * game.<span class='field'>scale</span> * <span class='constant'>0.9</span>
    }

    update() {
        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>x</span> += PIPE_SPEED
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>x</span> &lt; -<span class='constant'>this</span>.<span class='field'>width</span> {
                <span class='constant'>this</span>.<span class='field'>x</span> = <span class='constant'>0</span>
            }
        }

        <span class='keyword'>var</span> i = <span class='constant'>0</span>
        <span class='keyword'>while</span> <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i &lt; WIDTH {
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>draw</span>(
                <span class='constant'>this</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>width</span> * i,
                <span class='constant'>this</span>.<span class='field'>y</span>,
                <span class='constant'>0</span>,
                game.<span class='field'>scale</span>,
                <span class='constant'>0xFFFFFFFF</span>)

            i += <span class='constant'>1</span>
        }
    }
}

<span class='keyword'>class</span> <span class='class'>Pipe</span> {
    init(y) {
        <span class='constant'>this</span>.<span class='field'>dx</span> = PIPE_SPEED
        <span class='constant'>this</span>.<span class='field'>texture</span> = game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"pipe.png"</span>)
        <span class='constant'>this</span>.<span class='field'>hitbox</span> = Hitbox(
            WIDTH,
            y,
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>width</span>() * game.<span class='field'>scale</span>,
            <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>height</span>() * game.<span class='field'>scale</span>)

        <span class='constant'>this</span>.<span class='field'>scored</span> = <span class='constant'>false</span>
    }

    top() {
        <span class='keyword'>return</span> Hitbox(
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> - <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> / <span class='constant'>2</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>width</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span>)
    }

    bottom() {
        <span class='keyword'>return</span> Hitbox(
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>y</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span> / <span class='constant'>2</span> + PIPE_GAP,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>width</span>,
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>height</span>)
    }

    update() {
        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> += <span class='constant'>this</span>.<span class='field'>dx</span>
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>x</span> + <span class='constant'>this</span>.<span class='field'>hitbox</span>.<span class='field'>width</span> &lt; BIRD_MIN_X &amp;&amp; !<span class='constant'>this</span>.<span class='field'>scored</span> {
                game.<span class='field'>point</span>()
                <span class='constant'>this</span>.<span class='field'>scored</span> = <span class='constant'>true</span>
            }
        }

        <span class='keyword'>var</span> top = <span class='constant'>this</span>.<span class='field'>top</span>()
        <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>draw</span>(top.<span class='field'>x</span>, top.<span class='field'>y</span>, <span class='constant'>180</span>, game.<span class='field'>scale</span>, <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>var</span> bottom = <span class='constant'>this</span>.<span class='field'>bottom</span>()
        <span class='constant'>this</span>.<span class='field'>texture</span>.<span class='field'>draw</span>(bottom.<span class='field'>x</span>, bottom.<span class='field'>y</span>, <span class='constant'>0</span>, game.<span class='field'>scale</span>, <span class='constant'>0xFFFFFFFF</span>)

        top.<span class='field'>debug</span>()
        bottom.<span class='field'>debug</span>()
    }
}

<span class='keyword'>class</span> <span class='class'>Pipes</span> {
    init() {
        <span class='constant'>this</span>.<span class='field'>items</span> = []
        <span class='constant'>this</span>.<span class='field'>clock</span> = <span class='constant'>0</span>
    }

    update() {
        <span class='keyword'>if</span> !game.<span class='field'>started</span> {
            <span class='keyword'>return</span> <span class='constant'>true</span>
        }

        <span class='keyword'>if</span> !game.<span class='field'>over</span> {
            <span class='constant'>this</span>.<span class='field'>clock</span> += rl.<span class='field'>get_frame_time</span>()
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>clock</span> &gt;= PIPE_SPAWN_DELAY {
                <span class='constant'>this</span>.<span class='field'>items</span>.<span class='field'>push</span>(Pipe(game.<span class='field'>rng</span>.<span class='field'>number</span>(-PIPE_SPAWN_RANGE, PIPE_SPAWN_RANGE)))
                <span class='constant'>this</span>.<span class='field'>clock</span> %= PIPE_SPAWN_DELAY
            }

            <span class='constant'>this</span>.<span class='field'>items</span> = <span class='constant'>this</span>.<span class='field'>items</span>.<span class='field'>filter</span>(<span class='keyword'>fn</span> (p) =&gt; p.<span class='field'>hitbox</span>.<span class='field'>x</span> &gt;= -p.<span class='field'>hitbox</span>.<span class='field'>width</span>)
        }

        <span class='keyword'>for</span> _, pipe <span class='keyword'>in</span> <span class='constant'>this</span>.<span class='field'>items</span> {
            pipe.<span class='field'>update</span>()
            <span class='keyword'>if</span> !game.<span class='field'>over</span> &amp;&amp;
                (pipe.<span class='field'>top</span>().<span class='field'>collides</span>(game.<span class='field'>bird</span>.<span class='field'>hitbox</span>) ||
                 pipe.<span class='field'>bottom</span>().<span class='field'>collides</span>(game.<span class='field'>bird</span>.<span class='field'>hitbox</span>)) {
                <span class='keyword'>return</span> <span class='constant'>false</span>
            }
        }

        <span class='keyword'>return</span> <span class='constant'>true</span>
    }
}

<span class='keyword'>class</span> <span class='class'>Score</span> {
    init() {
        <span class='constant'>this</span>.<span class='field'>best</span> = <span class='constant'>nil</span>
        <span class='constant'>this</span>.<span class='field'>current</span> = <span class='constant'>0</span>
        <span class='constant'>this</span>.<span class='field'>textures</span> = [
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"0.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"1.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"2.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"3.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"4.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"5.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"6.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"7.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"8.png"</span>),
            game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"9.png"</span>),
        ]
    }

    reset() {
        <span class='constant'>this</span>.<span class='field'>current</span> = <span class='constant'>0</span>
    }

    display() {
        <span class='keyword'>if</span> game.<span class='field'>started</span> {
            <span class='keyword'>fn</span> <span class='function'>show</span>(n, y, scale, tint) {
                <span class='keyword'>var</span> digits = []
                <span class='keyword'>if</span> n &lt; <span class='constant'>10</span> {
                    digits.<span class='field'>push</span>(n)
                } <span class='keyword'>else</span> {
                    <span class='keyword'>while</span> n != <span class='constant'>0</span> {
                        digits.<span class='field'>push</span>(n % <span class='constant'>10</span>)
                        n = (n / <span class='constant'>10</span>).<span class='field'>floor</span>()
                    }
                }
                digits.<span class='field'>reverse</span>()

                scale *= game.<span class='field'>scale</span>
                <span class='keyword'>var</span> width = digits.<span class='field'>reduce</span>(<span class='keyword'>fn</span> (a, b) =&gt; a + <span class='constant'>this</span>.<span class='field'>textures</span>[b].<span class='field'>width</span>() * scale, <span class='constant'>0</span>)
                <span class='keyword'>var</span> x = (WIDTH - width) / <span class='constant'>2</span>
                <span class='keyword'>for</span> _, n <span class='keyword'>in</span> digits {
                    <span class='constant'>this</span>.<span class='field'>textures</span>[n].<span class='field'>draw</span>(x, y, <span class='constant'>0</span>, scale, tint)
                    x += <span class='constant'>this</span>.<span class='field'>textures</span>[n].<span class='field'>width</span>() * scale
                }
            }

            show(<span class='constant'>this</span>.<span class='field'>current</span>, HEIGHT / <span class='constant'>3.6</span>, <span class='constant'>1.0</span>, <span class='constant'>0xFFFFFFFF</span>)
            <span class='keyword'>if</span> <span class='constant'>this</span>.<span class='field'>best</span> {
                show(<span class='constant'>this</span>.<span class='field'>best</span>, HEIGHT / <span class='constant'>2.8</span>, <span class='constant'>0.7</span>, <span class='constant'>0xDDDDDDFF</span>)
            }
        }
    }
}

rl.<span class='field'>init_window</span>(WIDTH, HEIGHT, <span class='string'>"Hello from BS!"</span>)
rl.<span class='field'>init_audio_device</span>()
rl.<span class='field'>set_target_fps</span>(<span class='constant'>60</span>)

game.<span class='field'>assets</span> = Assets()
game.<span class='field'>started</span> = <span class='constant'>false</span>
game.<span class='field'>over</span> = <span class='constant'>false</span>
game.<span class='field'>rng</span> = math.<span class='field'>Random</span>()

game.<span class='field'>die</span> = <span class='keyword'>fn</span> () {
    <span class='keyword'>if</span> game.<span class='field'>over</span> {
        <span class='keyword'>return</span>
    }

    game.<span class='field'>over</span> = <span class='constant'>true</span>
    <span class='keyword'>if</span> !game.<span class='field'>score</span>.<span class='field'>best</span> || game.<span class='field'>score</span>.<span class='field'>current</span> &gt; game.<span class='field'>score</span>.<span class='field'>best</span> {
        game.<span class='field'>score</span>.<span class='field'>best</span> = game.<span class='field'>score</span>.<span class='field'>current</span>
    }

    game.<span class='field'>die_sound</span>.<span class='field'>play</span>()
    game.<span class='field'>background_music_delay</span> = BACKGROUND_MUSIC_DELAY
}

game.<span class='field'>point</span> = <span class='keyword'>fn</span> () {
    game.<span class='field'>score</span>.<span class='field'>current</span> += <span class='constant'>1</span>
    game.<span class='field'>point_sound</span>.<span class='field'>play</span>()
}

game.<span class='field'>start</span> = <span class='keyword'>fn</span> () {
    game.<span class='field'>start_sound</span>.<span class='field'>play</span>()
    game.<span class='field'>background_music</span>.<span class='field'>toggle</span>()
}

game.<span class='field'>background</span> = Background()
game.<span class='field'>base</span> = Base()
game.<span class='field'>bird</span> = Bird()
game.<span class='field'>pipes</span> = Pipes()
game.<span class='field'>score</span> = Score()

game.<span class='field'>over_message</span> = game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"gameover.png"</span>)
game.<span class='field'>title_message</span> = game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"title.png"</span>)
game.<span class='field'>continue_message</span> = game.<span class='field'>assets</span>.<span class='field'>texture</span>(<span class='string'>"continue.png"</span>)

game.<span class='field'>die_sound</span> = game.<span class='field'>assets</span>.<span class='field'>sound</span>(<span class='string'>"die.wav"</span>, rl.<span class='field'>Sound</span>)
game.<span class='field'>point_sound</span> = game.<span class='field'>assets</span>.<span class='field'>sound</span>(<span class='string'>"point.wav"</span>, rl.<span class='field'>Sound</span>)
game.<span class='field'>start_sound</span> = game.<span class='field'>assets</span>.<span class='field'>sound</span>(<span class='string'>"start.wav"</span>, rl.<span class='field'>Sound</span>)
game.<span class='field'>background_music</span> = game.<span class='field'>assets</span>.<span class='field'>sound</span>(<span class='string'>"background.mp3"</span>, rl.<span class='field'>Music</span>)

game.<span class='field'>background_music_delay</span> = <span class='constant'>0</span>

<span class='keyword'>while</span> !rl.<span class='field'>window_should_close</span>() {
    rl.<span class='field'>begin_drawing</span>()
    game.<span class='field'>background</span>.<span class='field'>update</span>()

    <span class='keyword'>if</span> game.<span class='field'>background_music_delay</span> &gt; <span class='constant'>0</span> {
        game.<span class='field'>background_music_delay</span> -= rl.<span class='field'>get_frame_time</span>()
        <span class='keyword'>if</span> game.<span class='field'>background_music_delay</span> &lt;= <span class='constant'>0</span> {
            game.<span class='field'>background_music</span>.<span class='field'>toggle</span>()
        }
    }

    game.<span class='field'>background_music</span>.<span class='field'>update</span>()

    <span class='keyword'>if</span> !game.<span class='field'>pipes</span>.<span class='field'>update</span>() {
        game.<span class='field'>die</span>()
    }

    game.<span class='field'>base</span>.<span class='field'>update</span>()
    game.<span class='field'>bird</span>.<span class='field'>update</span>()

    <span class='keyword'>if</span> !game.<span class='field'>started</span> {
        <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>title_message</span>.<span class='field'>width</span>() * TITLE_MESSAGE_SCALE) / <span class='constant'>2</span>
        game.<span class='field'>title_message</span>.<span class='field'>draw</span>(x, HEIGHT / <span class='constant'>7</span>, <span class='constant'>0</span>, TITLE_MESSAGE_SCALE, <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>continue_message</span>.<span class='field'>width</span>() * CONTINUE_MESSAGE_SCALE) / <span class='constant'>2</span>
        game.<span class='field'>continue_message</span>.<span class='field'>draw</span>(
            x,
            HEIGHT / <span class='constant'>3</span> + game.<span class='field'>continue_message</span>.<span class='field'>height</span>() * CONTINUE_MESSAGE_SCALE + MESSAGE_PADDING,
            <span class='constant'>0</span>,
            CONTINUE_MESSAGE_SCALE,
            <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>if</span> rl.<span class='field'>is_key_pressed</span>(<span class='constant'>32</span>) {
            game.<span class='field'>started</span> = <span class='constant'>true</span>
            game.<span class='field'>bird</span>.<span class='field'>dy</span> = IMPULSE
            game.<span class='field'>start</span>()
        }
    }

    <span class='keyword'>if</span> game.<span class='field'>over</span> {
        <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>over_message</span>.<span class='field'>width</span>() * OVER_MESSAGE_SCALE) / <span class='constant'>2</span>
        game.<span class='field'>over_message</span>.<span class='field'>draw</span>(x, HEIGHT / <span class='constant'>7</span>, <span class='constant'>0</span>, OVER_MESSAGE_SCALE, <span class='constant'>0xFFFFFFFF</span>)

        <span class='keyword'>if</span> game.<span class='field'>background_music_delay</span> &lt;= <span class='constant'>0</span> {
            <span class='keyword'>var</span> x = (WIDTH - game.<span class='field'>continue_message</span>.<span class='field'>width</span>() * CONTINUE_MESSAGE_SCALE) / <span class='constant'>2</span>
            game.<span class='field'>continue_message</span>.<span class='field'>draw</span>(
                x,
                HEIGHT / <span class='constant'>3</span> + game.<span class='field'>continue_message</span>.<span class='field'>height</span>() * CONTINUE_MESSAGE_SCALE + MESSAGE_PADDING,
                <span class='constant'>0</span>,
                CONTINUE_MESSAGE_SCALE,
                <span class='constant'>0xFFFFFFFF</span>)

            <span class='keyword'>if</span> rl.<span class='field'>is_key_pressed</span>(<span class='constant'>32</span>) {
                game.<span class='field'>over</span> = <span class='constant'>false</span>
                game.<span class='field'>score</span>.<span class='field'>reset</span>()

                game.<span class='field'>bird</span> = Bird()
                game.<span class='field'>pipes</span> = Pipes()

                game.<span class='field'>bird</span>.<span class='field'>dy</span> = IMPULSE
                game.<span class='field'>start</span>()
            }
        }
    }

    game.<span class='field'>score</span>.<span class='field'>display</span>()
    rl.<span class='field'>end_drawing</span>()
}

game.<span class='field'>assets</span>.<span class='field'>unload</span>()

rl.<span class='field'>close_audio_device</span>()
rl.<span class='field'>close_window</span>()
</pre>
</pre>
</div>
<p>
Download and extract the
<a href="https://raw.githubusercontent.com/shoumodip/bs/refs/heads/main/examples/flappy_bird/assets.zip">assets</a>
</p>
<p>
Run the program.
</p>
<div class='codes'>
<button class='copy' onclick='copyClick(this)'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 0 1 0 1.5h-1.5a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-1.5a.75.75 0 0 1 1.5 0v1.5A1.75 1.75 0 0 1 9.25 16h-7.5A1.75 1.75 0 0 1 0 14.25Z'></path><path d='M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0 1 14.25 11h-7.5A1.75 1.75 0 0 1 5 9.25Zm1.75-.25a.25.25 0 0 0-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 0 0 .25-.25v-7.5a.25.25 0 0 0-.25-.25Z'></path>
</svg>
</button>
<button class='copied hidden'>
<svg height='16' viewBox='0 0 16 16' version='1.1' width='16'>
    <path d='M13.78 4.22a.75.75 0 0 1 0 1.06l-7.25 7.25a.75.75 0 0 1-1.06 0L2.22 9.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018L6 10.94l6.72-6.72a.75.75 0 0 1 1.06 0Z'></path>
</svg>
</button>
<pre class='code active'>
<span class='string'>$ </span>bs flappy_bird.bs
</pre>
</div>
<section id='s10'>
<h3> Asset Sources (Reference)</h3>
<ul>
<li><a href="https://github.com/samuelcust/flappy-bird-assets">Images and Sound Effects</a></li>
<li><a href="https://pixabay.com/music/video-games-retro-game-arcade-short-236130/">Background Music</a></li>
</ul>
</section>
</section>
</main>
<nav id='sidebar' class='collapsed'>
<ul>
<li>
<a href='#s0'> <code>cat</code></a>
</li>
<li>
<a href='#s1'> <code>ls</code></a>
</li>
<li>
<a href='#s2'> <code>grep</code></a>
</li>
<li>
<a href='#s3'> Shell</a>
</li>
<li>
<a href='#s4'> Rule110</a>
</li>
<li>
<a href='#s5'> Game Of Life</a>
<ul>
<li>
<a href='#s6'> Console</a>
</li>
<li>
<a href='#s7'> Raylib</a>
</li>
</ul>
</li>
<li>
<a href='#s8'> CLI Task Management APP</a>
</li>
<li>
<a href='#s9'> Flappy Bird</a>
<ul>
<li>
<a href='#s10'> Asset Sources (Reference)</a>
</li>
</ul>
</li>
</ul>
</nav>
<script src='script.js'></script>
</body>
</html>
